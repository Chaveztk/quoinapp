{"ast":null,"code":"'use client';\n\nimport * as React from 'react';\nimport { ACTION_CLOSE, IMAGE_FIT_CONTAIN, MODULE_CONTROLLER, IMAGE_FIT_COVER, UNKNOWN_ACTION_TYPE, ELEMENT_BUTTON, ELEMENT_ICON, EVENT_ON_POINTER_DOWN, EVENT_ON_POINTER_MOVE, EVENT_ON_POINTER_UP, EVENT_ON_POINTER_LEAVE, EVENT_ON_POINTER_CANCEL, EVENT_ON_KEY_DOWN, EVENT_ON_KEY_UP, EVENT_ON_WHEEL, SLIDE_STATUS_LOADING, activeSlideStatus, SLIDE_STATUS_COMPLETE, SLIDE_STATUS_ERROR, SLIDE_STATUS_PLACEHOLDER, ACTION_PREV, ACTION_NEXT, ACTION_SWIPE, VK_ESCAPE, CLASS_FLEX_CENTER, MODULE_CAROUSEL, CLASS_FULLSIZE, VK_ARROW_LEFT, VK_ARROW_RIGHT, MODULE_NAVIGATION, CLASS_NO_SCROLL, CLASS_NO_SCROLL_PADDING, MODULE_NO_SCROLL, MODULE_PORTAL, MODULE_ROOT, MODULE_TOOLBAR } from './types.js';\nimport { createPortal } from 'react-dom';\nexport { ACTIVE_SLIDE_COMPLETE, ACTIVE_SLIDE_ERROR, ACTIVE_SLIDE_LOADING, ACTIVE_SLIDE_PLAYING, PLUGIN_CAPTIONS, PLUGIN_COUNTER, PLUGIN_DOWNLOAD, PLUGIN_FULLSCREEN, PLUGIN_INLINE, PLUGIN_SHARE, PLUGIN_SLIDESHOW, PLUGIN_THUMBNAILS, PLUGIN_ZOOM, SLIDE_STATUS_PLAYING } from './types.js';\nconst LightboxDefaultProps = {\n  open: false,\n  close: () => {},\n  index: 0,\n  slides: [],\n  render: {},\n  plugins: [],\n  toolbar: {\n    buttons: [ACTION_CLOSE]\n  },\n  labels: {},\n  animation: {\n    fade: 250,\n    swipe: 500,\n    easing: {\n      fade: \"ease\",\n      swipe: \"ease-out\",\n      navigation: \"ease-in-out\"\n    }\n  },\n  carousel: {\n    finite: false,\n    preload: 2,\n    padding: \"16px\",\n    spacing: \"30%\",\n    imageFit: IMAGE_FIT_CONTAIN\n  },\n  controller: {\n    ref: null,\n    focus: true,\n    aria: false,\n    touchAction: \"none\",\n    closeOnPullDown: false,\n    closeOnBackdropClick: false\n  },\n  portal: {},\n  on: {},\n  styles: {},\n  className: \"\"\n};\nfunction createModule(name, component) {\n  return {\n    name,\n    component\n  };\n}\nfunction createNode(module, children) {\n  return {\n    module,\n    children\n  };\n}\nfunction traverseNode(node, target, apply) {\n  if (node.module.name === target) {\n    return apply(node);\n  }\n  if (node.children) {\n    return [createNode(node.module, node.children.flatMap(n => {\n      var _a;\n      return (_a = traverseNode(n, target, apply)) !== null && _a !== void 0 ? _a : [];\n    }))];\n  }\n  return [node];\n}\nfunction traverse(nodes, target, apply) {\n  return nodes.flatMap(node => {\n    var _a;\n    return (_a = traverseNode(node, target, apply)) !== null && _a !== void 0 ? _a : [];\n  });\n}\nfunction withPlugins(root) {\n  let plugins = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  let augmentations = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  let config = root;\n  const contains = target => {\n    const nodes = [...config];\n    while (nodes.length > 0) {\n      const node = nodes.pop();\n      if ((node === null || node === void 0 ? void 0 : node.module.name) === target) return true;\n      if (node === null || node === void 0 ? void 0 : node.children) nodes.push(...node.children);\n    }\n    return false;\n  };\n  const addParent = (target, module) => {\n    if (target === \"\") {\n      config = [createNode(module, config)];\n      return;\n    }\n    config = traverse(config, target, node => [createNode(module, [node])]);\n  };\n  const append = (target, module) => {\n    config = traverse(config, target, node => [createNode(node.module, [createNode(module, node.children)])]);\n  };\n  const addChild = (target, module, precede) => {\n    config = traverse(config, target, node => {\n      var _a;\n      return [createNode(node.module, [...(precede ? [createNode(module)] : []), ...((_a = node.children) !== null && _a !== void 0 ? _a : []), ...(!precede ? [createNode(module)] : [])])];\n    });\n  };\n  const addSibling = (target, module, precede) => {\n    config = traverse(config, target, node => [...(precede ? [createNode(module)] : []), node, ...(!precede ? [createNode(module)] : [])]);\n  };\n  const addModule = module => {\n    append(MODULE_CONTROLLER, module);\n  };\n  const replace = (target, module) => {\n    config = traverse(config, target, node => [createNode(module, node.children)]);\n  };\n  const remove = target => {\n    config = traverse(config, target, node => node.children);\n  };\n  const augment = augmentation => {\n    augmentations.push(augmentation);\n  };\n  plugins.forEach(plugin => {\n    plugin({\n      contains,\n      addParent,\n      append,\n      addChild,\n      addSibling,\n      addModule,\n      replace,\n      remove,\n      augment\n    });\n  });\n  return {\n    config,\n    augmentation: props => augmentations.reduce((acc, augmentation) => augmentation(acc), props)\n  };\n}\nconst clsx = function () {\n  for (var _len = arguments.length, classes = new Array(_len), _key = 0; _key < _len; _key++) {\n    classes[_key] = arguments[_key];\n  }\n  return [...classes].filter(cls => Boolean(cls)).join(\" \");\n};\nconst cssPrefix$3 = \"yarl__\";\nconst cssClass = name => `${cssPrefix$3}${name}`;\nconst cssVar = name => `--${cssPrefix$3}${name}`;\nconst composePrefix = (base, prefix) => `${base}${prefix ? `_${prefix}` : \"\"}`;\nconst makeComposePrefix = base => prefix => composePrefix(base, prefix);\nconst label = (labels, lbl) => labels && labels[lbl] ? labels[lbl] : lbl;\nconst cleanup = function () {\n  for (var _len2 = arguments.length, cleaners = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    cleaners[_key2] = arguments[_key2];\n  }\n  return () => {\n    cleaners.forEach(cleaner => {\n      cleaner();\n    });\n  };\n};\nconst makeUseContext = (name, contextName, context) => () => {\n  const ctx = React.useContext(context);\n  if (!ctx) {\n    throw new Error(`${name} must be used within a ${contextName}.Provider`);\n  }\n  return ctx;\n};\nconst hasWindow = () => typeof window !== \"undefined\";\nfunction round(value) {\n  let decimals = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  const factor = 10 ** decimals;\n  return Math.round((value + Number.EPSILON) * factor) / factor;\n}\nconst isImageSlide = slide => slide.type === undefined || slide.type === \"image\";\nconst isImageFitCover = (image, imageFit) => image.imageFit === IMAGE_FIT_COVER || image.imageFit !== IMAGE_FIT_CONTAIN && imageFit === IMAGE_FIT_COVER;\nfunction parseLengthPercentage(input) {\n  if (typeof input === \"number\") {\n    return {\n      pixel: input\n    };\n  }\n  if (typeof input === \"string\") {\n    const value = parseInt(input, 10);\n    return input.endsWith(\"%\") ? {\n      percent: value\n    } : {\n      pixel: value\n    };\n  }\n  return {\n    pixel: 0\n  };\n}\nfunction computeSlideRect(containerRect, padding) {\n  const paddingValue = parseLengthPercentage(padding);\n  const paddingPixels = paddingValue.percent !== undefined ? containerRect.width / 100 * paddingValue.percent : paddingValue.pixel;\n  return {\n    width: Math.max(containerRect.width - 2 * paddingPixels, 0),\n    height: Math.max(containerRect.height - 2 * paddingPixels, 0)\n  };\n}\nconst devicePixelRatio = () => (hasWindow() ? window === null || window === void 0 ? void 0 : window.devicePixelRatio : undefined) || 1;\nconst getSlideIndex = (index, slidesCount) => slidesCount > 0 ? (index % slidesCount + slidesCount) % slidesCount : 0;\nconst hasSlides = slides => slides.length > 0;\nconst getSlide = (slides, index) => slides[getSlideIndex(index, slides.length)];\nconst getSlideIfPresent = (slides, index) => hasSlides(slides) ? getSlide(slides, index) : undefined;\nfunction addToolbarButton(toolbar, key, button) {\n  if (!button) return toolbar;\n  const {\n    buttons,\n    ...restToolbar\n  } = toolbar;\n  const index = buttons.findIndex(item => item === key);\n  const buttonWithKey = React.isValidElement(button) ? React.cloneElement(button, {\n    key\n  }, null) : button;\n  if (index >= 0) {\n    const result = [...buttons];\n    result.splice(index, 1, buttonWithKey);\n    return {\n      buttons: result,\n      ...restToolbar\n    };\n  }\n  return {\n    buttons: [buttonWithKey, ...buttons],\n    ...restToolbar\n  };\n}\nfunction stopNavigationEventsPropagation() {\n  const stopPropagation = event => {\n    event.stopPropagation();\n  };\n  return {\n    onPointerDown: stopPropagation,\n    onKeyDown: stopPropagation,\n    onWheel: stopPropagation\n  };\n}\nconst EventsContext = React.createContext(null);\nconst useEvents = makeUseContext(\"useEvents\", \"EventsContext\", EventsContext);\nfunction EventsProvider(_ref) {\n  let {\n    children\n  } = _ref;\n  const [subscriptions] = React.useState({});\n  React.useEffect(() => () => {\n    Object.keys(subscriptions).forEach(topic => delete subscriptions[topic]);\n  }, [subscriptions]);\n  const context = React.useMemo(() => {\n    const unsubscribe = (topic, callback) => {\n      var _a;\n      (_a = subscriptions[topic]) === null || _a === void 0 ? void 0 : _a.splice(0, subscriptions[topic].length, ...subscriptions[topic].filter(cb => cb !== callback));\n    };\n    const subscribe = (topic, callback) => {\n      if (!subscriptions[topic]) {\n        subscriptions[topic] = [];\n      }\n      subscriptions[topic].push(callback);\n      return () => unsubscribe(topic, callback);\n    };\n    const publish = function () {\n      for (var _len3 = arguments.length, _ref2 = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        _ref2[_key3] = arguments[_key3];\n      }\n      let [topic, event] = _ref2;\n      var _a;\n      (_a = subscriptions[topic]) === null || _a === void 0 ? void 0 : _a.forEach(callback => callback(event));\n    };\n    return {\n      publish,\n      subscribe,\n      unsubscribe\n    };\n  }, [subscriptions]);\n  return React.createElement(EventsContext.Provider, {\n    value: context\n  }, children);\n}\nconst LightboxPropsContext = React.createContext(null);\nconst useLightboxProps = makeUseContext(\"useLightboxProps\", \"LightboxPropsContext\", LightboxPropsContext);\nfunction LightboxPropsProvider(_ref3) {\n  let {\n    children,\n    ...props\n  } = _ref3;\n  return React.createElement(LightboxPropsContext.Provider, {\n    value: props\n  }, children);\n}\nconst LightboxStateContext = React.createContext(null);\nconst useLightboxState = makeUseContext(\"useLightboxState\", \"LightboxStateContext\", LightboxStateContext);\nconst LightboxDispatchContext = React.createContext(null);\nconst useLightboxDispatch = makeUseContext(\"useLightboxDispatch\", \"LightboxDispatchContext\", LightboxDispatchContext);\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"swipe\":\n      {\n        const {\n          slides\n        } = state;\n        const increment = (action === null || action === void 0 ? void 0 : action.increment) || 0;\n        const globalIndex = state.globalIndex + increment;\n        const currentIndex = getSlideIndex(globalIndex, slides.length);\n        const currentSlide = getSlideIfPresent(slides, currentIndex);\n        const animation = increment || action.duration ? {\n          increment,\n          duration: action.duration,\n          easing: action.easing\n        } : undefined;\n        return {\n          slides,\n          currentIndex,\n          globalIndex,\n          currentSlide,\n          animation\n        };\n      }\n    case \"update\":\n      return {\n        slides: action.slides,\n        currentIndex: action.index,\n        globalIndex: action.index,\n        currentSlide: getSlideIfPresent(action.slides, action.index)\n      };\n    default:\n      throw new Error(UNKNOWN_ACTION_TYPE);\n  }\n}\nfunction LightboxStateProvider(_ref4) {\n  let {\n    slides,\n    index,\n    children\n  } = _ref4;\n  const [state, dispatch] = React.useReducer(reducer, {\n    slides,\n    currentIndex: index,\n    globalIndex: index,\n    currentSlide: getSlideIfPresent(slides, index)\n  });\n  React.useEffect(() => {\n    dispatch({\n      type: \"update\",\n      slides,\n      index\n    });\n  }, [slides, index]);\n  const context = React.useMemo(() => ({\n    ...state,\n    state,\n    dispatch\n  }), [state, dispatch]);\n  return React.createElement(LightboxDispatchContext.Provider, {\n    value: dispatch\n  }, React.createElement(LightboxStateContext.Provider, {\n    value: context\n  }, children));\n}\nconst TimeoutsContext = React.createContext(null);\nconst useTimeouts = makeUseContext(\"useTimeouts\", \"TimeoutsContext\", TimeoutsContext);\nfunction TimeoutsProvider(_ref5) {\n  let {\n    children\n  } = _ref5;\n  const [timeouts] = React.useState([]);\n  React.useEffect(() => () => {\n    timeouts.forEach(tid => window.clearTimeout(tid));\n    timeouts.splice(0, timeouts.length);\n  }, [timeouts]);\n  const context = React.useMemo(() => {\n    const removeTimeout = id => {\n      timeouts.splice(0, timeouts.length, ...timeouts.filter(tid => tid !== id));\n    };\n    const setTimeout = (fn, delay) => {\n      const id = window.setTimeout(() => {\n        removeTimeout(id);\n        fn();\n      }, delay);\n      timeouts.push(id);\n      return id;\n    };\n    const clearTimeout = id => {\n      if (id !== undefined) {\n        removeTimeout(id);\n        window.clearTimeout(id);\n      }\n    };\n    return {\n      setTimeout,\n      clearTimeout\n    };\n  }, [timeouts]);\n  return React.createElement(TimeoutsContext.Provider, {\n    value: context\n  }, children);\n}\nconst IconButton = React.forwardRef(function IconButton(_ref6, ref) {\n  let {\n    label: label$1,\n    className,\n    icon: Icon,\n    renderIcon,\n    onClick,\n    style,\n    ...rest\n  } = _ref6;\n  const {\n    styles,\n    labels\n  } = useLightboxProps();\n  return React.createElement(\"button\", {\n    ref: ref,\n    type: \"button\",\n    \"aria-label\": label(labels, label$1),\n    className: clsx(cssClass(ELEMENT_BUTTON), className),\n    onClick: onClick,\n    style: {\n      ...style,\n      ...styles.button\n    },\n    ...rest\n  }, renderIcon ? renderIcon() : React.createElement(Icon, {\n    className: cssClass(ELEMENT_ICON),\n    style: styles.icon\n  }));\n});\nfunction svgIcon(name, children) {\n  const icon = props => React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\",\n    width: \"24\",\n    height: \"24\",\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    ...props\n  }, children);\n  icon.displayName = name;\n  return icon;\n}\nfunction createIcon(name, glyph) {\n  return svgIcon(name, React.createElement(\"g\", {\n    fill: \"currentColor\"\n  }, React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }), glyph));\n}\nfunction createIconDisabled(name, glyph) {\n  return svgIcon(name, React.createElement(React.Fragment, null, React.createElement(\"defs\", null, React.createElement(\"mask\", {\n    id: \"strike\"\n  }, React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"white\"\n  }), React.createElement(\"path\", {\n    d: \"M0 0L24 24\",\n    stroke: \"black\",\n    strokeWidth: 4\n  }))), React.createElement(\"path\", {\n    d: \"M0.70707 2.121320L21.878680 23.292883\",\n    stroke: \"currentColor\",\n    strokeWidth: 2\n  }), React.createElement(\"g\", {\n    fill: \"currentColor\",\n    mask: \"url(#strike)\"\n  }, React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fill: \"none\"\n  }), glyph)));\n}\nconst CloseIcon = createIcon(\"Close\", React.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}));\nconst PreviousIcon = createIcon(\"Previous\", React.createElement(\"path\", {\n  d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"\n}));\nconst NextIcon = createIcon(\"Next\", React.createElement(\"path\", {\n  d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}));\nconst LoadingIcon = createIcon(\"Loading\", React.createElement(React.Fragment, null, Array.from({\n  length: 8\n}).map((_, index, array) => React.createElement(\"line\", {\n  key: index,\n  x1: \"12\",\n  y1: \"6.5\",\n  x2: \"12\",\n  y2: \"1.8\",\n  strokeLinecap: \"round\",\n  strokeWidth: \"2.6\",\n  stroke: \"currentColor\",\n  strokeOpacity: 1 / array.length * (index + 1),\n  transform: `rotate(${360 / array.length * index}, 12, 12)`\n}))));\nconst ErrorIcon = createIcon(\"Error\", React.createElement(\"path\", {\n  d: \"M21.9,21.9l-8.49-8.49l0,0L3.59,3.59l0,0L2.1,2.1L0.69,3.51L3,5.83V19c0,1.1,0.9,2,2,2h13.17l2.31,2.31L21.9,21.9z M5,18 l3.5-4.5l2.5,3.01L12.17,15l3,3H5z M21,18.17L5.83,3H19c1.1,0,2,0.9,2,2V18.17z\"\n}));\nconst useLayoutEffect = hasWindow() ? React.useLayoutEffect : React.useEffect;\nfunction useMotionPreference() {\n  const [reduceMotion, setReduceMotion] = React.useState(false);\n  React.useEffect(() => {\n    var _a, _b;\n    const mediaQuery = (_a = window.matchMedia) === null || _a === void 0 ? void 0 : _a.call(window, \"(prefers-reduced-motion: reduce)\");\n    setReduceMotion(mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.matches);\n    const listener = event => setReduceMotion(event.matches);\n    (_b = mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.addEventListener) === null || _b === void 0 ? void 0 : _b.call(mediaQuery, \"change\", listener);\n    return () => {\n      var _a;\n      return (_a = mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.removeEventListener) === null || _a === void 0 ? void 0 : _a.call(mediaQuery, \"change\", listener);\n    };\n  }, []);\n  return reduceMotion;\n}\nfunction currentTransformation(node) {\n  let x = 0;\n  let y = 0;\n  let z = 0;\n  const matrix = window.getComputedStyle(node).transform;\n  const matcher = matrix.match(/matrix.*\\((.+)\\)/);\n  if (matcher) {\n    const values = matcher[1].split(\",\").map(str => Number.parseInt(str, 10));\n    if (values.length === 6) {\n      x = values[4];\n      y = values[5];\n    } else if (values.length === 16) {\n      x = values[12];\n      y = values[13];\n      z = values[14];\n    }\n  }\n  return {\n    x,\n    y,\n    z\n  };\n}\nfunction useAnimation(nodeRef, computeAnimation) {\n  const snapshot = React.useRef();\n  const animation = React.useRef();\n  const reduceMotion = useMotionPreference();\n  useLayoutEffect(() => {\n    var _a, _b, _c;\n    if (nodeRef.current && snapshot.current !== undefined && !reduceMotion) {\n      const {\n        keyframes,\n        duration,\n        easing,\n        onfinish\n      } = computeAnimation(snapshot.current, nodeRef.current.getBoundingClientRect(), currentTransformation(nodeRef.current)) || {};\n      if (keyframes && duration) {\n        (_a = animation.current) === null || _a === void 0 ? void 0 : _a.cancel();\n        animation.current = undefined;\n        try {\n          animation.current = (_c = (_b = nodeRef.current).animate) === null || _c === void 0 ? void 0 : _c.call(_b, keyframes, {\n            duration,\n            easing\n          });\n        } catch (err) {\n          console.error(err);\n        }\n        if (animation.current) {\n          animation.current.onfinish = () => {\n            animation.current = undefined;\n            onfinish === null || onfinish === void 0 ? void 0 : onfinish();\n          };\n        }\n      }\n    }\n    snapshot.current = undefined;\n  });\n  return {\n    prepareAnimation: currentSnapshot => {\n      snapshot.current = currentSnapshot;\n    },\n    isAnimationPlaying: () => {\n      var _a;\n      return ((_a = animation.current) === null || _a === void 0 ? void 0 : _a.playState) === \"running\";\n    }\n  };\n}\nfunction useContainerRect() {\n  const [containerRect, setContainerRect] = React.useState();\n  const containerRef = React.useRef(null);\n  const observerRef = React.useRef();\n  const setContainerRef = React.useCallback(node => {\n    containerRef.current = node;\n    if (observerRef.current) {\n      observerRef.current.disconnect();\n      observerRef.current = undefined;\n    }\n    const updateContainerRect = () => {\n      if (node) {\n        const styles = window.getComputedStyle(node);\n        const parse = value => parseFloat(value) || 0;\n        setContainerRect({\n          width: Math.round(node.clientWidth - parse(styles.paddingLeft) - parse(styles.paddingRight)),\n          height: Math.round(node.clientHeight - parse(styles.paddingTop) - parse(styles.paddingBottom))\n        });\n      } else {\n        setContainerRect(undefined);\n      }\n    };\n    updateContainerRect();\n    if (node && typeof ResizeObserver !== \"undefined\") {\n      observerRef.current = new ResizeObserver(updateContainerRect);\n      observerRef.current.observe(node);\n    }\n  }, []);\n  return React.useMemo(() => ({\n    setContainerRef,\n    containerRef,\n    containerRect\n  }), [setContainerRef, containerRef, containerRect]);\n}\nfunction useDelay() {\n  const timeoutId = React.useRef();\n  const {\n    setTimeout,\n    clearTimeout\n  } = useTimeouts();\n  return React.useCallback((callback, delay) => {\n    clearTimeout(timeoutId.current);\n    timeoutId.current = setTimeout(callback, delay > 0 ? delay : 0);\n  }, [setTimeout, clearTimeout]);\n}\nfunction useEventCallback(fn) {\n  const ref = React.useRef(fn);\n  useLayoutEffect(() => {\n    ref.current = fn;\n  });\n  return React.useCallback(function () {\n    var _a;\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n    return (_a = ref.current) === null || _a === void 0 ? void 0 : _a.call(ref, ...args);\n  }, []);\n}\nfunction setRef(ref, value) {\n  if (typeof ref === \"function\") {\n    ref(value);\n  } else if (ref) {\n    ref.current = value;\n  }\n}\nfunction useForkRef(refA, refB) {\n  return React.useMemo(() => refA == null && refB == null ? null : refValue => {\n    setRef(refA, refValue);\n    setRef(refB, refValue);\n  }, [refA, refB]);\n}\nfunction useLoseFocus(focus) {\n  let disabled = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  const focused = React.useRef(disabled);\n  useLayoutEffect(() => {\n    if (disabled) {\n      focus();\n    }\n  }, [disabled, focus]);\n  const onFocus = React.useCallback(() => {\n    focused.current = true;\n  }, []);\n  const onBlur = React.useCallback(() => {\n    focused.current = false;\n  }, []);\n  return {\n    onFocus,\n    onBlur\n  };\n}\nfunction useRTL() {\n  const [isRTL, setIsRTL] = React.useState(false);\n  useLayoutEffect(() => {\n    setIsRTL(window.getComputedStyle(window.document.documentElement).direction === \"rtl\");\n  }, []);\n  return isRTL;\n}\nfunction useSensors() {\n  const [subscribers] = React.useState({});\n  return React.useMemo(() => {\n    const notifySubscribers = (type, event) => {\n      var _a;\n      (_a = subscribers[type]) === null || _a === void 0 ? void 0 : _a.forEach(listener => {\n        if (!event.isPropagationStopped()) listener(event);\n      });\n    };\n    return {\n      registerSensors: {\n        onPointerDown: event => notifySubscribers(EVENT_ON_POINTER_DOWN, event),\n        onPointerMove: event => notifySubscribers(EVENT_ON_POINTER_MOVE, event),\n        onPointerUp: event => notifySubscribers(EVENT_ON_POINTER_UP, event),\n        onPointerLeave: event => notifySubscribers(EVENT_ON_POINTER_LEAVE, event),\n        onPointerCancel: event => notifySubscribers(EVENT_ON_POINTER_CANCEL, event),\n        onKeyDown: event => notifySubscribers(EVENT_ON_KEY_DOWN, event),\n        onKeyUp: event => notifySubscribers(EVENT_ON_KEY_UP, event),\n        onWheel: event => notifySubscribers(EVENT_ON_WHEEL, event)\n      },\n      subscribeSensors: (type, callback) => {\n        if (!subscribers[type]) {\n          subscribers[type] = [];\n        }\n        subscribers[type].unshift(callback);\n        return () => {\n          const listeners = subscribers[type];\n          if (listeners) {\n            listeners.splice(0, listeners.length, ...listeners.filter(el => el !== callback));\n          }\n        };\n      }\n    };\n  }, [subscribers]);\n}\nfunction useThrottle(callback, delay) {\n  const lastCallbackTime = React.useRef(0);\n  const delayCallback = useDelay();\n  const executeCallback = useEventCallback(function () {\n    lastCallbackTime.current = Date.now();\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n    callback(args);\n  });\n  return React.useCallback(function () {\n    for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      args[_key6] = arguments[_key6];\n    }\n    delayCallback(() => {\n      executeCallback(args);\n    }, delay - (Date.now() - lastCallbackTime.current));\n  }, [delay, executeCallback, delayCallback]);\n}\nconst slidePrefix = makeComposePrefix(\"slide\");\nconst slideImagePrefix = makeComposePrefix(\"slide_image\");\nfunction ImageSlide(_ref7) {\n  let {\n    slide: image,\n    offset,\n    render,\n    rect,\n    imageFit,\n    onClick,\n    onLoad,\n    style\n  } = _ref7;\n  var _a, _b, _c, _d, _e, _f, _g;\n  const [status, setStatus] = React.useState(SLIDE_STATUS_LOADING);\n  const {\n    publish\n  } = useEvents();\n  const {\n    setTimeout\n  } = useTimeouts();\n  const imageRef = React.useRef(null);\n  React.useEffect(() => {\n    if (offset === 0) {\n      publish(activeSlideStatus(status));\n    }\n  }, [offset, status, publish]);\n  const handleLoading = useEventCallback(img => {\n    (\"decode\" in img ? img.decode() : Promise.resolve()).catch(() => {}).then(() => {\n      if (!img.parentNode) {\n        return;\n      }\n      setStatus(SLIDE_STATUS_COMPLETE);\n      setTimeout(() => {\n        onLoad === null || onLoad === void 0 ? void 0 : onLoad(img);\n      }, 0);\n    });\n  });\n  const setImageRef = React.useCallback(img => {\n    imageRef.current = img;\n    if (img === null || img === void 0 ? void 0 : img.complete) {\n      handleLoading(img);\n    }\n  }, [handleLoading]);\n  const handleOnLoad = React.useCallback(event => {\n    handleLoading(event.currentTarget);\n  }, [handleLoading]);\n  const onError = React.useCallback(() => {\n    setStatus(SLIDE_STATUS_ERROR);\n  }, []);\n  const cover = isImageFitCover(image, imageFit);\n  const nonInfinite = (value, fallback) => Number.isFinite(value) ? value : fallback;\n  const maxWidth = nonInfinite(Math.max(...((_b = (_a = image.srcSet) === null || _a === void 0 ? void 0 : _a.map(x => x.width)) !== null && _b !== void 0 ? _b : []).concat(image.width ? [image.width] : [])), ((_c = imageRef.current) === null || _c === void 0 ? void 0 : _c.naturalWidth) || 0);\n  const maxHeight = nonInfinite(Math.max(...((_e = (_d = image.srcSet) === null || _d === void 0 ? void 0 : _d.map(x => x.height)) !== null && _e !== void 0 ? _e : []).concat(image.height ? [image.height] : [])), ((_f = imageRef.current) === null || _f === void 0 ? void 0 : _f.naturalHeight) || 0);\n  const defaultStyle = maxWidth && maxHeight ? {\n    maxWidth: `min(${maxWidth}px, 100%)`,\n    maxHeight: `min(${maxHeight}px, 100%)`\n  } : {\n    maxWidth: \"100%\",\n    maxHeight: \"100%\"\n  };\n  const srcSet = (_g = image.srcSet) === null || _g === void 0 ? void 0 : _g.sort((a, b) => a.width - b.width).map(item => `${item.src} ${item.width}w`).join(\", \");\n  const estimateActualWidth = () => rect && !cover && image.width && image.height ? rect.height / image.height * image.width : Number.MAX_VALUE;\n  const sizes = srcSet && rect && hasWindow() ? `${Math.round(Math.min(estimateActualWidth(), rect.width))}px` : undefined;\n  return React.createElement(React.Fragment, null, React.createElement(\"img\", {\n    ref: setImageRef,\n    onLoad: handleOnLoad,\n    onError: onError,\n    onClick: onClick,\n    className: clsx(cssClass(slideImagePrefix()), cover && cssClass(slideImagePrefix(\"cover\")), status !== SLIDE_STATUS_COMPLETE && cssClass(slideImagePrefix(\"loading\"))),\n    draggable: false,\n    alt: image.alt,\n    style: {\n      ...defaultStyle,\n      ...style\n    },\n    sizes: sizes,\n    srcSet: srcSet,\n    src: image.src\n  }), status !== SLIDE_STATUS_COMPLETE && React.createElement(\"div\", {\n    className: cssClass(slidePrefix(SLIDE_STATUS_PLACEHOLDER))\n  }, status === SLIDE_STATUS_LOADING && ((render === null || render === void 0 ? void 0 : render.iconLoading) ? render.iconLoading() : React.createElement(LoadingIcon, {\n    className: clsx(cssClass(ELEMENT_ICON), cssClass(slidePrefix(SLIDE_STATUS_LOADING)))\n  })), status === SLIDE_STATUS_ERROR && ((render === null || render === void 0 ? void 0 : render.iconError) ? render.iconError() : React.createElement(ErrorIcon, {\n    className: clsx(cssClass(ELEMENT_ICON), cssClass(slidePrefix(SLIDE_STATUS_ERROR)))\n  }))));\n}\nvar SwipeState;\n(function (SwipeState) {\n  SwipeState[SwipeState[\"NONE\"] = 0] = \"NONE\";\n  SwipeState[SwipeState[\"SWIPE\"] = 1] = \"SWIPE\";\n  SwipeState[SwipeState[\"PULL_DOWN\"] = 2] = \"PULL_DOWN\";\n  SwipeState[SwipeState[\"ANIMATION\"] = 3] = \"ANIMATION\";\n})(SwipeState || (SwipeState = {}));\nfunction usePointerEvents(subscribeSensors, onPointerDown, onPointerMove, onPointerUp, disabled) {\n  React.useEffect(() => {\n    if (disabled) return () => {};\n    return cleanup(subscribeSensors(EVENT_ON_POINTER_DOWN, onPointerDown), subscribeSensors(EVENT_ON_POINTER_MOVE, onPointerMove), subscribeSensors(EVENT_ON_POINTER_UP, onPointerUp), subscribeSensors(EVENT_ON_POINTER_LEAVE, onPointerUp), subscribeSensors(EVENT_ON_POINTER_CANCEL, onPointerUp));\n  }, [subscribeSensors, onPointerDown, onPointerMove, onPointerUp, disabled]);\n}\nvar Gesture;\n(function (Gesture) {\n  Gesture[Gesture[\"NONE\"] = 0] = \"NONE\";\n  Gesture[Gesture[\"SWIPE\"] = 1] = \"SWIPE\";\n  Gesture[Gesture[\"PULL_DOWN\"] = 2] = \"PULL_DOWN\";\n})(Gesture || (Gesture = {}));\nconst SWIPE_THRESHOLD = 30;\nfunction usePointerSwipe(subscribeSensors, isSwipeValid, containerWidth, swipeAnimationDuration, onSwipeStart, onSwipeProgress, onSwipeFinish, onSwipeCancel, pullDownEnabled, onPullDownStart, onPullDownProgress, onPullDownFinish, onPullDownCancel) {\n  const offset = React.useRef(0);\n  const pointers = React.useRef([]);\n  const activePointer = React.useRef();\n  const startTime = React.useRef(0);\n  const gesture = React.useRef(Gesture.NONE);\n  const clearPointer = React.useCallback(event => {\n    if (activePointer.current === event.pointerId) {\n      activePointer.current = undefined;\n      gesture.current = Gesture.NONE;\n    }\n    const currentPointers = pointers.current;\n    currentPointers.splice(0, currentPointers.length, ...currentPointers.filter(p => p.pointerId !== event.pointerId));\n  }, []);\n  const addPointer = React.useCallback(event => {\n    clearPointer(event);\n    event.persist();\n    pointers.current.push(event);\n  }, [clearPointer]);\n  const onPointerDown = useEventCallback(event => {\n    addPointer(event);\n  });\n  const onPointerUp = useEventCallback(event => {\n    if (pointers.current.find(x => x.pointerId === event.pointerId) && activePointer.current === event.pointerId) {\n      const duration = Date.now() - startTime.current;\n      const currentOffset = offset.current;\n      if (gesture.current === Gesture.SWIPE) {\n        if (Math.abs(currentOffset) > 0.3 * containerWidth || Math.abs(currentOffset) > 5 && duration < swipeAnimationDuration) {\n          onSwipeFinish(currentOffset, duration);\n        } else {\n          onSwipeCancel(currentOffset);\n        }\n      } else if (gesture.current === Gesture.PULL_DOWN) {\n        if (currentOffset > 2 * SWIPE_THRESHOLD) {\n          onPullDownFinish(currentOffset, duration);\n        } else {\n          onPullDownCancel(currentOffset);\n        }\n      }\n      offset.current = 0;\n      gesture.current = Gesture.NONE;\n    }\n    clearPointer(event);\n  });\n  const onPointerMove = useEventCallback(event => {\n    const pointer = pointers.current.find(p => p.pointerId === event.pointerId);\n    if (pointer) {\n      const isCurrentPointer = activePointer.current === event.pointerId;\n      if (event.buttons === 0) {\n        if (isCurrentPointer && offset.current !== 0) {\n          onPointerUp(event);\n        } else {\n          clearPointer(pointer);\n        }\n        return;\n      }\n      const deltaX = event.clientX - pointer.clientX;\n      const deltaY = event.clientY - pointer.clientY;\n      if (activePointer.current === undefined) {\n        const startGesture = newGesture => {\n          addPointer(event);\n          activePointer.current = event.pointerId;\n          startTime.current = Date.now();\n          gesture.current = newGesture;\n        };\n        if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > SWIPE_THRESHOLD && isSwipeValid(deltaX)) {\n          startGesture(Gesture.SWIPE);\n          onSwipeStart();\n        } else if (pullDownEnabled && Math.abs(deltaY) > Math.abs(deltaX) && deltaY > SWIPE_THRESHOLD) {\n          startGesture(Gesture.PULL_DOWN);\n          onPullDownStart();\n        }\n      } else if (isCurrentPointer) {\n        if (gesture.current === Gesture.SWIPE) {\n          offset.current = deltaX;\n          onSwipeProgress(deltaX);\n        } else if (gesture.current === Gesture.PULL_DOWN) {\n          offset.current = deltaY;\n          onPullDownProgress(deltaY);\n        }\n      }\n    }\n  });\n  usePointerEvents(subscribeSensors, onPointerDown, onPointerMove, onPointerUp);\n}\nconst WHEEL = \"wheel\";\nfunction preventDefault(event) {\n  if (Math.abs(event.deltaX) > Math.abs(event.deltaY) || event.ctrlKey) {\n    event.preventDefault();\n  }\n}\nfunction usePreventSwipeNavigation() {\n  const ref = React.useRef(null);\n  return React.useCallback(node => {\n    var _a;\n    if (node) {\n      node.addEventListener(WHEEL, preventDefault, {\n        passive: false\n      });\n    } else {\n      (_a = ref.current) === null || _a === void 0 ? void 0 : _a.removeEventListener(WHEEL, preventDefault);\n    }\n    ref.current = node;\n  }, []);\n}\nfunction useWheelSwipe(swipeState, subscribeSensors, isSwipeValid, containerWidth, swipeAnimationDuration, onSwipeStart, onSwipeProgress, onSwipeFinish, onSwipeCancel) {\n  const offset = React.useRef(0);\n  const intent = React.useRef(0);\n  const intentCleanup = React.useRef();\n  const resetCleanup = React.useRef();\n  const wheelResidualMomentum = React.useRef(0);\n  const startTime = React.useRef(0);\n  const {\n    setTimeout,\n    clearTimeout\n  } = useTimeouts();\n  const cancelSwipeIntentCleanup = React.useCallback(() => {\n    if (intentCleanup.current) {\n      clearTimeout(intentCleanup.current);\n      intentCleanup.current = undefined;\n    }\n  }, [clearTimeout]);\n  const cancelSwipeResetCleanup = React.useCallback(() => {\n    if (resetCleanup.current) {\n      clearTimeout(resetCleanup.current);\n      resetCleanup.current = undefined;\n    }\n  }, [clearTimeout]);\n  const handleCleanup = useEventCallback(() => {\n    if (swipeState !== SwipeState.SWIPE) {\n      offset.current = 0;\n      startTime.current = 0;\n      cancelSwipeIntentCleanup();\n      cancelSwipeResetCleanup();\n    }\n  });\n  React.useEffect(handleCleanup, [swipeState, handleCleanup]);\n  const handleCancelSwipe = useEventCallback(currentSwipeOffset => {\n    resetCleanup.current = undefined;\n    if (offset.current === currentSwipeOffset) {\n      onSwipeCancel(offset.current);\n    }\n  });\n  const onWheel = useEventCallback(event => {\n    if (event.ctrlKey) {\n      return;\n    }\n    if (Math.abs(event.deltaY) > Math.abs(event.deltaX)) {\n      return;\n    }\n    if (swipeState === SwipeState.NONE) {\n      if (Math.abs(event.deltaX) <= 1.2 * Math.abs(wheelResidualMomentum.current)) {\n        wheelResidualMomentum.current = event.deltaX;\n        return;\n      }\n      if (!isSwipeValid(-event.deltaX)) {\n        return;\n      }\n      intent.current += event.deltaX;\n      cancelSwipeIntentCleanup();\n      if (Math.abs(intent.current) > 30) {\n        intent.current = 0;\n        wheelResidualMomentum.current = 0;\n        startTime.current = Date.now();\n        onSwipeStart();\n      } else {\n        const currentSwipeIntent = intent.current;\n        intentCleanup.current = setTimeout(() => {\n          intentCleanup.current = undefined;\n          if (currentSwipeIntent === intent.current) {\n            intent.current = 0;\n          }\n        }, swipeAnimationDuration);\n      }\n    } else if (swipeState === SwipeState.SWIPE) {\n      let newSwipeOffset = offset.current - event.deltaX;\n      newSwipeOffset = Math.min(Math.abs(newSwipeOffset), containerWidth) * Math.sign(newSwipeOffset);\n      offset.current = newSwipeOffset;\n      onSwipeProgress(newSwipeOffset);\n      cancelSwipeResetCleanup();\n      if (Math.abs(newSwipeOffset) > 0.2 * containerWidth) {\n        wheelResidualMomentum.current = event.deltaX;\n        onSwipeFinish(newSwipeOffset, Date.now() - startTime.current);\n        return;\n      }\n      resetCleanup.current = setTimeout(() => handleCancelSwipe(newSwipeOffset), 2 * swipeAnimationDuration);\n    } else {\n      wheelResidualMomentum.current = event.deltaX;\n    }\n  });\n  React.useEffect(() => subscribeSensors(EVENT_ON_WHEEL, onWheel), [subscribeSensors, onWheel]);\n}\nconst cssContainerPrefix = makeComposePrefix(\"container\");\nconst ControllerContext = React.createContext(null);\nconst useController = makeUseContext(\"useController\", \"ControllerContext\", ControllerContext);\nfunction Controller(_ref8) {\n  let {\n    children,\n    ...props\n  } = _ref8;\n  var _a;\n  const {\n    carousel,\n    animation,\n    controller,\n    on,\n    styles,\n    render\n  } = props;\n  const [toolbarWidth, setToolbarWidth] = React.useState();\n  const state = useLightboxState();\n  const dispatch = useLightboxDispatch();\n  const [swipeState, setSwipeState] = React.useState(SwipeState.NONE);\n  const swipeOffset = React.useRef(0);\n  const pullDownOffset = React.useRef(0);\n  const pullDownOpacity = React.useRef(1);\n  const {\n    registerSensors,\n    subscribeSensors\n  } = useSensors();\n  const {\n    subscribe,\n    publish\n  } = useEvents();\n  const cleanupAnimationIncrement = useDelay();\n  const cleanupSwipeOffset = useDelay();\n  const cleanupPullDownOffset = useDelay();\n  const {\n    containerRef,\n    setContainerRef,\n    containerRect\n  } = useContainerRect();\n  const handleContainerRef = useForkRef(usePreventSwipeNavigation(), setContainerRef);\n  const carouselRef = React.useRef(null);\n  const setCarouselRef = useForkRef(carouselRef, undefined);\n  const isRTL = useRTL();\n  const rtl = value => (isRTL ? -1 : 1) * (typeof value === \"number\" ? value : 1);\n  const focus = useEventCallback(() => {\n    var _a;\n    return (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n  });\n  const getLightboxProps = useEventCallback(() => props);\n  const getLightboxState = useEventCallback(() => state);\n  const prev = React.useCallback(params => publish(ACTION_PREV, params), [publish]);\n  const next = React.useCallback(params => publish(ACTION_NEXT, params), [publish]);\n  const close = React.useCallback(() => publish(ACTION_CLOSE), [publish]);\n  const isSwipeValid = offset => !(carousel.finite && (rtl(offset) > 0 && state.currentIndex === 0 || rtl(offset) < 0 && state.currentIndex === state.slides.length - 1));\n  const setSwipeOffset = offset => {\n    var _a;\n    swipeOffset.current = offset;\n    (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.style.setProperty(cssVar(\"swipe_offset\"), `${Math.round(offset)}px`);\n  };\n  const pullDownEnabled = controller.closeOnPullDown;\n  const setPullDownOffset = offset => {\n    var _a, _b;\n    pullDownOffset.current = offset;\n    pullDownOpacity.current = (() => {\n      const threshold = 60;\n      const minOpacity = 0.5;\n      return Math.min(Math.max(round(1 - offset / threshold * (1 - minOpacity), 2), minOpacity), 1);\n    })();\n    (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.style.setProperty(cssVar(\"pull_down_offset\"), `${Math.round(offset)}px`);\n    (_b = containerRef.current) === null || _b === void 0 ? void 0 : _b.style.setProperty(cssVar(\"pull_down_opacity\"), `${pullDownOpacity.current}`);\n  };\n  const {\n    prepareAnimation: preparePullDownAnimation\n  } = useAnimation(carouselRef, (snapshot, rect, translate) => {\n    if (carouselRef.current && containerRect) {\n      return {\n        keyframes: [{\n          transform: `translate(0, ${snapshot.rect.y - rect.y + translate.y}px)`,\n          opacity: snapshot.opacity\n        }, {\n          transform: \"translate(0, 0)\",\n          opacity: 1\n        }],\n        duration: snapshot.duration,\n        easing: animation.easing.fade\n      };\n    }\n    return undefined;\n  });\n  const pullDown = (offset, cancel) => {\n    if (pullDownEnabled) {\n      setPullDownOffset(offset);\n      let duration = 0;\n      if (carouselRef.current) {\n        duration = animation.fade * (cancel ? 2 : 1);\n        preparePullDownAnimation({\n          rect: carouselRef.current.getBoundingClientRect(),\n          opacity: pullDownOpacity.current,\n          duration\n        });\n      }\n      cleanupPullDownOffset(() => {\n        setPullDownOffset(0);\n        setSwipeState(SwipeState.NONE);\n      }, duration);\n      setSwipeState(SwipeState.ANIMATION);\n      if (!cancel) {\n        close();\n      }\n    }\n  };\n  const {\n    prepareAnimation,\n    isAnimationPlaying\n  } = useAnimation(carouselRef, (snapshot, rect, translate) => {\n    var _a;\n    if (carouselRef.current && containerRect && ((_a = state.animation) === null || _a === void 0 ? void 0 : _a.duration)) {\n      const parsedSpacing = parseLengthPercentage(carousel.spacing);\n      const spacingValue = (parsedSpacing.percent ? parsedSpacing.percent * containerRect.width / 100 : parsedSpacing.pixel) || 0;\n      return {\n        keyframes: [{\n          transform: `translate(${rtl(state.globalIndex - snapshot.index) * (containerRect.width + spacingValue) + snapshot.rect.x - rect.x + translate.x}px, 0)`\n        }, {\n          transform: \"translate(0, 0)\"\n        }],\n        duration: state.animation.duration,\n        easing: state.animation.easing\n      };\n    }\n    return undefined;\n  });\n  const swipe = useEventCallback(action => {\n    var _a, _b;\n    const currentSwipeOffset = action.offset || 0;\n    const swipeDuration = !currentSwipeOffset ? (_a = animation.navigation) !== null && _a !== void 0 ? _a : animation.swipe : animation.swipe;\n    const swipeEasing = !currentSwipeOffset && !isAnimationPlaying() ? animation.easing.navigation : animation.easing.swipe;\n    let {\n      direction\n    } = action;\n    const count = (_b = action.count) !== null && _b !== void 0 ? _b : 1;\n    let newSwipeState = SwipeState.ANIMATION;\n    let newSwipeAnimationDuration = swipeDuration * count;\n    if (!direction) {\n      const containerWidth = containerRect === null || containerRect === void 0 ? void 0 : containerRect.width;\n      const elapsedTime = action.duration || 0;\n      const expectedTime = containerWidth ? swipeDuration / containerWidth * Math.abs(currentSwipeOffset) : swipeDuration;\n      if (count !== 0) {\n        if (elapsedTime < expectedTime) {\n          newSwipeAnimationDuration = newSwipeAnimationDuration / expectedTime * Math.max(elapsedTime, expectedTime / 5);\n        } else if (containerWidth) {\n          newSwipeAnimationDuration = swipeDuration / containerWidth * (containerWidth - Math.abs(currentSwipeOffset));\n        }\n        direction = rtl(currentSwipeOffset) > 0 ? ACTION_PREV : ACTION_NEXT;\n      } else {\n        newSwipeAnimationDuration = swipeDuration / 2;\n      }\n    }\n    let increment = 0;\n    if (direction === ACTION_PREV) {\n      if (isSwipeValid(rtl(1))) {\n        increment = -count;\n      } else {\n        newSwipeState = SwipeState.NONE;\n        newSwipeAnimationDuration = swipeDuration;\n      }\n    } else if (direction === ACTION_NEXT) {\n      if (isSwipeValid(rtl(-1))) {\n        increment = count;\n      } else {\n        newSwipeState = SwipeState.NONE;\n        newSwipeAnimationDuration = swipeDuration;\n      }\n    }\n    newSwipeAnimationDuration = Math.round(newSwipeAnimationDuration);\n    cleanupSwipeOffset(() => {\n      setSwipeOffset(0);\n      setSwipeState(SwipeState.NONE);\n    }, newSwipeAnimationDuration);\n    if (carouselRef.current) {\n      prepareAnimation({\n        rect: carouselRef.current.getBoundingClientRect(),\n        index: state.globalIndex\n      });\n    }\n    setSwipeState(newSwipeState);\n    publish(ACTION_SWIPE, {\n      type: \"swipe\",\n      increment,\n      duration: newSwipeAnimationDuration,\n      easing: swipeEasing\n    });\n  });\n  React.useEffect(() => {\n    var _a, _b;\n    if (((_a = state.animation) === null || _a === void 0 ? void 0 : _a.increment) && ((_b = state.animation) === null || _b === void 0 ? void 0 : _b.duration)) {\n      cleanupAnimationIncrement(() => dispatch({\n        type: \"swipe\",\n        increment: 0\n      }), state.animation.duration);\n    }\n  }, [state.animation, dispatch, cleanupAnimationIncrement]);\n  const swipeParams = [subscribeSensors, isSwipeValid, (containerRect === null || containerRect === void 0 ? void 0 : containerRect.width) || 0, animation.swipe, () => setSwipeState(SwipeState.SWIPE), offset => setSwipeOffset(offset), (offset, duration) => swipe({\n    offset,\n    duration,\n    count: 1\n  }), offset => swipe({\n    offset,\n    count: 0\n  })];\n  const pullDownParams = [() => {\n    if (pullDownEnabled) {\n      setSwipeState(SwipeState.PULL_DOWN);\n    }\n  }, offset => setPullDownOffset(offset), offset => pullDown(offset), offset => pullDown(offset, true)];\n  usePointerSwipe(...swipeParams, pullDownEnabled, ...pullDownParams);\n  useWheelSwipe(swipeState, ...swipeParams);\n  const focusOnMount = useEventCallback(() => {\n    var _a;\n    if (controller.focus) {\n      (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n  });\n  React.useEffect(focusOnMount, [focusOnMount]);\n  const onViewCallback = useEventCallback(() => {\n    var _a;\n    (_a = on.view) === null || _a === void 0 ? void 0 : _a.call(on, {\n      index: state.currentIndex\n    });\n  });\n  React.useEffect(onViewCallback, [state.globalIndex, onViewCallback]);\n  React.useEffect(() => cleanup(subscribe(ACTION_PREV, action => swipe({\n    direction: ACTION_PREV,\n    ...action\n  })), subscribe(ACTION_NEXT, action => swipe({\n    direction: ACTION_NEXT,\n    ...action\n  })), subscribe(ACTION_SWIPE, action => dispatch(action))), [subscribe, swipe, dispatch]);\n  React.useEffect(() => subscribeSensors(EVENT_ON_KEY_UP, event => {\n    if (event.code === VK_ESCAPE) {\n      close();\n    }\n  }), [subscribeSensors, close]);\n  const context = React.useMemo(() => ({\n    prev,\n    next,\n    close,\n    focus,\n    slideRect: containerRect ? computeSlideRect(containerRect, carousel.padding) : {\n      width: 0,\n      height: 0\n    },\n    containerRect: containerRect || {\n      width: 0,\n      height: 0\n    },\n    subscribeSensors,\n    containerRef,\n    setCarouselRef,\n    toolbarWidth,\n    setToolbarWidth\n  }), [prev, next, close, focus, subscribeSensors, containerRect, containerRef, setCarouselRef, toolbarWidth, setToolbarWidth, carousel.padding]);\n  React.useImperativeHandle(controller.ref, () => ({\n    prev,\n    next,\n    close,\n    focus,\n    getLightboxProps,\n    getLightboxState\n  }), [prev, next, close, focus, getLightboxProps, getLightboxState]);\n  return React.createElement(\"div\", {\n    ref: handleContainerRef,\n    className: clsx(cssClass(cssContainerPrefix()), cssClass(CLASS_FLEX_CENTER)),\n    style: {\n      ...(swipeState === SwipeState.SWIPE ? {\n        [cssVar(\"swipe_offset\")]: `${Math.round(swipeOffset.current)}px`\n      } : null),\n      ...(swipeState === SwipeState.PULL_DOWN ? {\n        [cssVar(\"pull_down_offset\")]: `${Math.round(pullDownOffset.current)}px`,\n        [cssVar(\"pull_down_opacity\")]: `${pullDownOpacity.current}`\n      } : null),\n      ...(controller.touchAction !== \"none\" ? {\n        [cssVar(\"controller_touch_action\")]: controller.touchAction\n      } : null),\n      ...styles.container\n    },\n    ...(controller.aria ? {\n      role: \"presentation\",\n      \"aria-live\": \"polite\"\n    } : null),\n    tabIndex: -1,\n    ...registerSensors\n  }, containerRect && React.createElement(ControllerContext.Provider, {\n    value: context\n  }, children, (_a = render.controls) === null || _a === void 0 ? void 0 : _a.call(render)));\n}\nconst ControllerModule = createModule(MODULE_CONTROLLER, Controller);\nfunction cssPrefix$2(value) {\n  return composePrefix(MODULE_CAROUSEL, value);\n}\nfunction cssSlidePrefix(value) {\n  return composePrefix(\"slide\", value);\n}\nfunction CarouselSlide(_ref9) {\n  let {\n    slide,\n    offset\n  } = _ref9;\n  const containerRef = React.useRef(null);\n  const {\n    currentIndex\n  } = useLightboxState();\n  const {\n    slideRect,\n    close\n  } = useController();\n  const {\n    render,\n    carousel: {\n      imageFit\n    },\n    on: {\n      click: onClick\n    },\n    controller: {\n      closeOnBackdropClick\n    }\n  } = useLightboxProps();\n  const renderSlide = () => {\n    var _a, _b, _c, _d;\n    let rendered = (_a = render.slide) === null || _a === void 0 ? void 0 : _a.call(render, {\n      slide,\n      offset,\n      rect: slideRect\n    });\n    if (!rendered && isImageSlide(slide)) {\n      rendered = React.createElement(ImageSlide, {\n        slide: slide,\n        offset: offset,\n        render: render,\n        rect: slideRect,\n        imageFit: imageFit,\n        onClick: offset === 0 ? () => onClick === null || onClick === void 0 ? void 0 : onClick({\n          index: currentIndex\n        }) : undefined\n      });\n    }\n    return rendered ? React.createElement(React.Fragment, null, (_b = render.slideHeader) === null || _b === void 0 ? void 0 : _b.call(render, {\n      slide\n    }), ((_c = render.slideContainer) !== null && _c !== void 0 ? _c : _ref10 => {\n      let {\n        children\n      } = _ref10;\n      return children;\n    })({\n      slide,\n      children: rendered\n    }), (_d = render.slideFooter) === null || _d === void 0 ? void 0 : _d.call(render, {\n      slide\n    })) : null;\n  };\n  const handleBackdropClick = event => {\n    const container = containerRef.current;\n    const target = event.target instanceof HTMLElement ? event.target : undefined;\n    if (closeOnBackdropClick && target && container && (target === container || Array.from(container.children).find(x => x === target) && target.classList.contains(cssClass(CLASS_FULLSIZE)))) {\n      close();\n    }\n  };\n  return React.createElement(\"div\", {\n    ref: containerRef,\n    className: clsx(cssClass(cssSlidePrefix()), offset === 0 && cssClass(cssSlidePrefix(\"current\")), cssClass(CLASS_FLEX_CENTER)),\n    onClick: handleBackdropClick\n  }, renderSlide());\n}\nfunction Placeholder() {\n  return React.createElement(\"div\", {\n    className: cssClass(\"slide\")\n  });\n}\nfunction Carousel(_ref11) {\n  let {\n    carousel: {\n      finite,\n      preload,\n      padding,\n      spacing\n    }\n  } = _ref11;\n  const {\n    slides,\n    currentIndex,\n    globalIndex\n  } = useLightboxState();\n  const {\n    setCarouselRef\n  } = useController();\n  const spacingValue = parseLengthPercentage(spacing);\n  const paddingValue = parseLengthPercentage(padding);\n  const items = [];\n  if ((slides === null || slides === void 0 ? void 0 : slides.length) > 0) {\n    for (let i = currentIndex - preload; i < currentIndex; i += 1) {\n      const key = globalIndex + i - currentIndex;\n      items.push(!finite || i >= 0 ? React.createElement(CarouselSlide, {\n        key: key,\n        slide: slides[(i + preload * slides.length) % slides.length],\n        offset: i - currentIndex\n      }) : React.createElement(Placeholder, {\n        key: key\n      }));\n    }\n    items.push(React.createElement(CarouselSlide, {\n      key: globalIndex,\n      slide: slides[currentIndex],\n      offset: 0\n    }));\n    for (let i = currentIndex + 1; i <= currentIndex + preload; i += 1) {\n      const key = globalIndex + i - currentIndex;\n      items.push(!finite || i <= slides.length - 1 ? React.createElement(CarouselSlide, {\n        key: key,\n        slide: slides[i % slides.length],\n        offset: i - currentIndex\n      }) : React.createElement(Placeholder, {\n        key: key\n      }));\n    }\n  }\n  return React.createElement(\"div\", {\n    ref: setCarouselRef,\n    className: clsx(cssClass(cssPrefix$2()), items.length > 0 && cssClass(cssPrefix$2(\"with_slides\"))),\n    style: {\n      [`${cssVar(cssPrefix$2(\"slides_count\"))}`]: items.length,\n      [`${cssVar(cssPrefix$2(\"spacing_px\"))}`]: spacingValue.pixel || 0,\n      [`${cssVar(cssPrefix$2(\"spacing_percent\"))}`]: spacingValue.percent || 0,\n      [`${cssVar(cssPrefix$2(\"padding_px\"))}`]: paddingValue.pixel || 0,\n      [`${cssVar(cssPrefix$2(\"padding_percent\"))}`]: paddingValue.percent || 0\n    }\n  }, items);\n}\nconst CarouselModule = createModule(MODULE_CAROUSEL, Carousel);\nfunction NavigationButton(_ref12) {\n  let {\n    label,\n    icon,\n    renderIcon,\n    action,\n    onClick,\n    disabled\n  } = _ref12;\n  return React.createElement(IconButton, {\n    label: label,\n    icon: icon,\n    renderIcon: renderIcon,\n    className: cssClass(`navigation_${action}`),\n    disabled: disabled,\n    onClick: onClick,\n    ...useLoseFocus(useController().focus, disabled)\n  });\n}\nfunction Navigation(_ref13) {\n  let {\n    carousel: {\n      finite\n    },\n    animation,\n    render: {\n      buttonPrev,\n      buttonNext,\n      iconPrev,\n      iconNext\n    }\n  } = _ref13;\n  var _a;\n  const {\n    slides,\n    currentIndex\n  } = useLightboxState();\n  const {\n    prev,\n    next,\n    subscribeSensors\n  } = useController();\n  const isRTL = useRTL();\n  const prevDisabled = slides.length === 0 || finite && currentIndex === 0;\n  const nextDisabled = slides.length === 0 || finite && currentIndex === slides.length - 1;\n  const throttle = ((_a = animation.navigation) !== null && _a !== void 0 ? _a : animation.swipe) / 2;\n  const prevThrottled = useThrottle(prev, throttle);\n  const nextThrottled = useThrottle(next, throttle);\n  const handleKeyDown = useEventCallback(event => {\n    if (event.key === VK_ARROW_LEFT && !(isRTL ? nextDisabled : prevDisabled)) {\n      (isRTL ? nextThrottled : prevThrottled)();\n    }\n    if (event.key === VK_ARROW_RIGHT && !(isRTL ? prevDisabled : nextDisabled)) {\n      (isRTL ? prevThrottled : nextThrottled)();\n    }\n  });\n  React.useEffect(() => subscribeSensors(EVENT_ON_KEY_DOWN, handleKeyDown), [subscribeSensors, handleKeyDown]);\n  return React.createElement(React.Fragment, null, buttonPrev ? buttonPrev() : React.createElement(NavigationButton, {\n    label: \"Previous\",\n    action: ACTION_PREV,\n    icon: PreviousIcon,\n    renderIcon: iconPrev,\n    disabled: prevDisabled,\n    onClick: prev\n  }), buttonNext ? buttonNext() : React.createElement(NavigationButton, {\n    label: \"Next\",\n    action: ACTION_NEXT,\n    icon: NextIcon,\n    renderIcon: iconNext,\n    disabled: nextDisabled,\n    onClick: next\n  }));\n}\nconst NavigationModule = createModule(MODULE_NAVIGATION, Navigation);\nconst noScroll = cssClass(CLASS_NO_SCROLL);\nconst noScrollPadding = cssClass(CLASS_NO_SCROLL_PADDING);\nfunction isHTMLElement(element) {\n  return \"style\" in element;\n}\nfunction padScrollbar(element, padding, rtl) {\n  const styles = window.getComputedStyle(element);\n  const property = rtl ? \"padding-left\" : \"padding-right\";\n  const computedValue = rtl ? styles.paddingLeft : styles.paddingRight;\n  const originalValue = element.style.getPropertyValue(property);\n  element.style.setProperty(property, `${(parseInt(computedValue, 10) || 0) + padding}px`);\n  return () => {\n    if (originalValue) {\n      element.style.setProperty(property, originalValue);\n    } else {\n      element.style.removeProperty(property);\n    }\n  };\n}\nfunction NoScroll(_ref14) {\n  let {\n    children\n  } = _ref14;\n  const rtl = useRTL();\n  useLayoutEffect(() => {\n    const cleanup = [];\n    const {\n      body,\n      documentElement\n    } = document;\n    const scrollbar = Math.round(window.innerWidth - documentElement.clientWidth);\n    if (scrollbar > 0) {\n      cleanup.push(padScrollbar(body, scrollbar, rtl));\n      const elements = body.getElementsByTagName(\"*\");\n      for (let i = 0; i < elements.length; i += 1) {\n        const element = elements[i];\n        if (isHTMLElement(element) && window.getComputedStyle(element).getPropertyValue(\"position\") === \"fixed\" && !element.classList.contains(noScrollPadding)) {\n          cleanup.push(padScrollbar(element, scrollbar, rtl));\n        }\n      }\n    }\n    body.classList.add(noScroll);\n    return () => {\n      body.classList.remove(noScroll);\n      cleanup.forEach(clean => clean());\n    };\n  }, [rtl]);\n  return React.createElement(React.Fragment, null, children);\n}\nconst NoScrollModule = createModule(MODULE_NO_SCROLL, NoScroll);\nfunction cssPrefix$1(value) {\n  return composePrefix(MODULE_PORTAL, value);\n}\nfunction setAttribute(element, attribute, value) {\n  const previousValue = element.getAttribute(attribute);\n  element.setAttribute(attribute, value);\n  return () => {\n    if (previousValue) {\n      element.setAttribute(attribute, previousValue);\n    } else {\n      element.removeAttribute(attribute);\n    }\n  };\n}\nfunction Portal(_ref15) {\n  let {\n    children,\n    animation,\n    styles,\n    className,\n    on,\n    portal,\n    close\n  } = _ref15;\n  const [mounted, setMounted] = React.useState(false);\n  const [visible, setVisible] = React.useState(false);\n  const cleanup = React.useRef([]);\n  const {\n    setTimeout\n  } = useTimeouts();\n  const {\n    subscribe\n  } = useEvents();\n  const reduceMotion = useMotionPreference();\n  const animationDuration = !reduceMotion ? animation.fade : 0;\n  React.useEffect(() => {\n    setMounted(true);\n    return () => {\n      setMounted(false);\n      setVisible(false);\n    };\n  }, []);\n  const handleClose = useEventCallback(() => {\n    var _a;\n    setVisible(false);\n    (_a = on.exiting) === null || _a === void 0 ? void 0 : _a.call(on);\n    setTimeout(() => {\n      var _a;\n      (_a = on.exited) === null || _a === void 0 ? void 0 : _a.call(on);\n      close();\n    }, animationDuration);\n  });\n  React.useEffect(() => subscribe(ACTION_CLOSE, handleClose), [subscribe, handleClose]);\n  const handleEnter = useEventCallback(node => {\n    var _a, _b, _c;\n    node.scrollTop;\n    setVisible(true);\n    (_a = on.entering) === null || _a === void 0 ? void 0 : _a.call(on);\n    const elements = (_c = (_b = node.parentNode) === null || _b === void 0 ? void 0 : _b.children) !== null && _c !== void 0 ? _c : [];\n    for (let i = 0; i < elements.length; i += 1) {\n      const element = elements[i];\n      if ([\"TEMPLATE\", \"SCRIPT\", \"STYLE\"].indexOf(element.tagName) === -1 && element !== node) {\n        cleanup.current.push(setAttribute(element, \"inert\", \"true\"));\n        cleanup.current.push(setAttribute(element, \"aria-hidden\", \"true\"));\n      }\n    }\n    setTimeout(() => {\n      var _a;\n      (_a = on.entered) === null || _a === void 0 ? void 0 : _a.call(on);\n    }, animationDuration);\n  });\n  const handleExit = useEventCallback(() => {\n    cleanup.current.forEach(clean => clean());\n    cleanup.current = [];\n  });\n  const handleRef = React.useCallback(node => {\n    if (node) {\n      handleEnter(node);\n    } else {\n      handleExit();\n    }\n  }, [handleEnter, handleExit]);\n  return mounted ? createPortal(React.createElement(\"div\", {\n    ref: handleRef,\n    className: clsx(className, cssClass(\"root\"), cssClass(cssPrefix$1()), cssClass(CLASS_NO_SCROLL_PADDING), visible && cssClass(cssPrefix$1(\"open\"))),\n    role: \"presentation\",\n    \"aria-live\": \"polite\",\n    style: {\n      ...(animation.fade !== LightboxDefaultProps.animation.fade ? {\n        [cssVar(\"fade_animation_duration\")]: `${animationDuration}ms`\n      } : null),\n      ...(animation.easing.fade !== LightboxDefaultProps.animation.easing.fade ? {\n        [cssVar(\"fade_animation_timing_function\")]: animation.easing.fade\n      } : null),\n      ...styles.root\n    }\n  }, children), portal.root || document.body) : null;\n}\nconst PortalModule = createModule(MODULE_PORTAL, Portal);\nfunction Root(_ref16) {\n  let {\n    children\n  } = _ref16;\n  return React.createElement(React.Fragment, null, children);\n}\nconst RootModule = createModule(MODULE_ROOT, Root);\nfunction cssPrefix(value) {\n  return composePrefix(MODULE_TOOLBAR, value);\n}\nfunction Toolbar(_ref17) {\n  let {\n    toolbar: {\n      buttons\n    },\n    render: {\n      buttonClose,\n      iconClose\n    }\n  } = _ref17;\n  const {\n    close,\n    setToolbarWidth\n  } = useController();\n  const {\n    setContainerRef,\n    containerRect\n  } = useContainerRect();\n  useLayoutEffect(() => {\n    setToolbarWidth(containerRect === null || containerRect === void 0 ? void 0 : containerRect.width);\n  }, [setToolbarWidth, containerRect === null || containerRect === void 0 ? void 0 : containerRect.width]);\n  const renderCloseButton = () => {\n    if (buttonClose) return buttonClose();\n    return React.createElement(IconButton, {\n      key: ACTION_CLOSE,\n      label: \"Close\",\n      icon: CloseIcon,\n      renderIcon: iconClose,\n      onClick: close\n    });\n  };\n  return React.createElement(\"div\", {\n    ref: setContainerRef,\n    className: cssClass(cssPrefix()),\n    ...stopNavigationEventsPropagation()\n  }, buttons === null || buttons === void 0 ? void 0 : buttons.map(button => button === ACTION_CLOSE ? renderCloseButton() : button));\n}\nconst ToolbarModule = createModule(MODULE_TOOLBAR, Toolbar);\nfunction renderNode(node, props) {\n  var _a;\n  return React.createElement(node.module.component, {\n    key: node.module.name,\n    ...props\n  }, (_a = node.children) === null || _a === void 0 ? void 0 : _a.map(child => renderNode(child, props)));\n}\nfunction mergeAnimation(defaultAnimation) {\n  let animation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    easing: defaultAnimationEasing,\n    ...restDefaultAnimation\n  } = defaultAnimation;\n  const {\n    easing,\n    ...restAnimation\n  } = animation;\n  return {\n    easing: {\n      ...defaultAnimationEasing,\n      ...easing\n    },\n    ...restDefaultAnimation,\n    ...restAnimation\n  };\n}\nfunction Lightbox(_ref18) {\n  let {\n    carousel,\n    animation,\n    render,\n    toolbar,\n    controller,\n    on,\n    plugins,\n    slides,\n    index,\n    ...restProps\n  } = _ref18;\n  const {\n    animation: defaultAnimation,\n    carousel: defaultCarousel,\n    render: defaultRender,\n    toolbar: defaultToolbar,\n    controller: defaultController,\n    on: defaultOn,\n    slides: defaultSlides,\n    index: defaultIndex,\n    plugins: defaultPlugins,\n    ...restDefaultProps\n  } = LightboxDefaultProps;\n  const {\n    config,\n    augmentation\n  } = withPlugins([createNode(PortalModule, [createNode(NoScrollModule, [createNode(ControllerModule, [createNode(CarouselModule), createNode(ToolbarModule), createNode(NavigationModule)])])])], plugins || defaultPlugins);\n  const props = augmentation({\n    animation: mergeAnimation(defaultAnimation, animation),\n    carousel: {\n      ...defaultCarousel,\n      ...carousel\n    },\n    render: {\n      ...defaultRender,\n      ...render\n    },\n    toolbar: {\n      ...defaultToolbar,\n      ...toolbar\n    },\n    controller: {\n      ...defaultController,\n      ...controller\n    },\n    on: {\n      ...defaultOn,\n      ...on\n    },\n    ...restDefaultProps,\n    ...restProps\n  });\n  if (!props.open) return null;\n  return React.createElement(LightboxPropsProvider, {\n    ...props\n  }, React.createElement(LightboxStateProvider, {\n    slides: slides || defaultSlides,\n    index: index || defaultIndex\n  }, React.createElement(TimeoutsProvider, null, React.createElement(EventsProvider, null, renderNode(createNode(RootModule, config), props)))));\n}\nexport { ACTION_CLOSE, ACTION_NEXT, ACTION_PREV, ACTION_SWIPE, CLASS_FLEX_CENTER, CLASS_FULLSIZE, CLASS_NO_SCROLL, CLASS_NO_SCROLL_PADDING, Carousel, CarouselModule, CloseIcon, Controller, ControllerContext, ControllerModule, ELEMENT_BUTTON, ELEMENT_ICON, EVENT_ON_KEY_DOWN, EVENT_ON_KEY_UP, EVENT_ON_POINTER_CANCEL, EVENT_ON_POINTER_DOWN, EVENT_ON_POINTER_LEAVE, EVENT_ON_POINTER_MOVE, EVENT_ON_POINTER_UP, EVENT_ON_WHEEL, ErrorIcon, EventsContext, EventsProvider, IMAGE_FIT_CONTAIN, IMAGE_FIT_COVER, IconButton, ImageSlide, Lightbox, LightboxDefaultProps, LightboxDispatchContext, LightboxPropsContext, LightboxPropsProvider, LightboxStateContext, LightboxStateProvider, LoadingIcon, MODULE_CAROUSEL, MODULE_CONTROLLER, MODULE_NAVIGATION, MODULE_NO_SCROLL, MODULE_PORTAL, MODULE_ROOT, MODULE_TOOLBAR, Navigation, NavigationButton, NavigationModule, NextIcon, NoScroll, NoScrollModule, Portal, PortalModule, PreviousIcon, Root, RootModule, SLIDE_STATUS_COMPLETE, SLIDE_STATUS_ERROR, SLIDE_STATUS_LOADING, SLIDE_STATUS_PLACEHOLDER, SwipeState, TimeoutsContext, TimeoutsProvider, Toolbar, ToolbarModule, UNKNOWN_ACTION_TYPE, VK_ARROW_LEFT, VK_ARROW_RIGHT, VK_ESCAPE, activeSlideStatus, addToolbarButton, cleanup, clsx, composePrefix, computeSlideRect, createIcon, createIconDisabled, createModule, createNode, cssClass, cssVar, Lightbox as default, devicePixelRatio, getSlide, getSlideIfPresent, getSlideIndex, hasSlides, hasWindow, isImageFitCover, isImageSlide, label, makeComposePrefix, makeUseContext, parseLengthPercentage, round, setRef, stopNavigationEventsPropagation, useAnimation, useContainerRect, useController, useDelay, useEventCallback, useEvents, useForkRef, useLayoutEffect, useLightboxDispatch, useLightboxProps, useLightboxState, useLoseFocus, useMotionPreference, usePointerEvents, usePointerSwipe, usePreventSwipeNavigation, useRTL, useSensors, useThrottle, useTimeouts, useWheelSwipe, withPlugins };","map":{"version":3,"names":["React","ACTION_CLOSE","IMAGE_FIT_CONTAIN","MODULE_CONTROLLER","IMAGE_FIT_COVER","UNKNOWN_ACTION_TYPE","ELEMENT_BUTTON","ELEMENT_ICON","EVENT_ON_POINTER_DOWN","EVENT_ON_POINTER_MOVE","EVENT_ON_POINTER_UP","EVENT_ON_POINTER_LEAVE","EVENT_ON_POINTER_CANCEL","EVENT_ON_KEY_DOWN","EVENT_ON_KEY_UP","EVENT_ON_WHEEL","SLIDE_STATUS_LOADING","activeSlideStatus","SLIDE_STATUS_COMPLETE","SLIDE_STATUS_ERROR","SLIDE_STATUS_PLACEHOLDER","ACTION_PREV","ACTION_NEXT","ACTION_SWIPE","VK_ESCAPE","CLASS_FLEX_CENTER","MODULE_CAROUSEL","CLASS_FULLSIZE","VK_ARROW_LEFT","VK_ARROW_RIGHT","MODULE_NAVIGATION","CLASS_NO_SCROLL","CLASS_NO_SCROLL_PADDING","MODULE_NO_SCROLL","MODULE_PORTAL","MODULE_ROOT","MODULE_TOOLBAR","createPortal","ACTIVE_SLIDE_COMPLETE","ACTIVE_SLIDE_ERROR","ACTIVE_SLIDE_LOADING","ACTIVE_SLIDE_PLAYING","PLUGIN_CAPTIONS","PLUGIN_COUNTER","PLUGIN_DOWNLOAD","PLUGIN_FULLSCREEN","PLUGIN_INLINE","PLUGIN_SHARE","PLUGIN_SLIDESHOW","PLUGIN_THUMBNAILS","PLUGIN_ZOOM","SLIDE_STATUS_PLAYING","LightboxDefaultProps","open","close","index","slides","render","plugins","toolbar","buttons","labels","animation","fade","swipe","easing","navigation","carousel","finite","preload","padding","spacing","imageFit","controller","ref","focus","aria","touchAction","closeOnPullDown","closeOnBackdropClick","portal","on","styles","className","createModule","name","component","createNode","module","children","traverseNode","node","target","apply","flatMap","n","_a","traverse","nodes","withPlugins","root","arguments","length","undefined","augmentations","config","contains","pop","push","addParent","append","addChild","precede","addSibling","addModule","replace","remove","augment","augmentation","forEach","plugin","props","reduce","acc","clsx","_len","classes","Array","_key","filter","cls","Boolean","join","cssPrefix$3","cssClass","cssVar","composePrefix","base","prefix","makeComposePrefix","label","lbl","cleanup","_len2","cleaners","_key2","cleaner","makeUseContext","contextName","context","ctx","useContext","Error","hasWindow","window","round","value","decimals","factor","Math","Number","EPSILON","isImageSlide","slide","type","isImageFitCover","image","parseLengthPercentage","input","pixel","parseInt","endsWith","percent","computeSlideRect","containerRect","paddingValue","paddingPixels","width","max","height","devicePixelRatio","getSlideIndex","slidesCount","hasSlides","getSlide","getSlideIfPresent","addToolbarButton","key","button","restToolbar","findIndex","item","buttonWithKey","isValidElement","cloneElement","result","splice","stopNavigationEventsPropagation","stopPropagation","event","onPointerDown","onKeyDown","onWheel","EventsContext","createContext","useEvents","EventsProvider","_ref","subscriptions","useState","useEffect","Object","keys","topic","useMemo","unsubscribe","callback","cb","subscribe","publish","_len3","_ref2","_key3","createElement","Provider","LightboxPropsContext","useLightboxProps","LightboxPropsProvider","_ref3","LightboxStateContext","useLightboxState","LightboxDispatchContext","useLightboxDispatch","reducer","state","action","increment","globalIndex","currentIndex","currentSlide","duration","LightboxStateProvider","_ref4","dispatch","useReducer","TimeoutsContext","useTimeouts","TimeoutsProvider","_ref5","timeouts","tid","clearTimeout","removeTimeout","id","setTimeout","fn","delay","IconButton","forwardRef","_ref6","label$1","icon","Icon","renderIcon","onClick","style","rest","svgIcon","xmlns","viewBox","focusable","displayName","createIcon","glyph","fill","d","createIconDisabled","Fragment","stroke","strokeWidth","mask","CloseIcon","PreviousIcon","NextIcon","LoadingIcon","from","map","_","array","x1","y1","x2","y2","strokeLinecap","strokeOpacity","transform","ErrorIcon","useLayoutEffect","useMotionPreference","reduceMotion","setReduceMotion","_b","mediaQuery","matchMedia","call","matches","listener","addEventListener","removeEventListener","currentTransformation","x","y","z","matrix","getComputedStyle","matcher","match","values","split","str","useAnimation","nodeRef","computeAnimation","snapshot","useRef","_c","current","keyframes","onfinish","getBoundingClientRect","cancel","animate","err","console","error","prepareAnimation","currentSnapshot","isAnimationPlaying","playState","useContainerRect","setContainerRect","containerRef","observerRef","setContainerRef","useCallback","disconnect","updateContainerRect","parse","parseFloat","clientWidth","paddingLeft","paddingRight","clientHeight","paddingTop","paddingBottom","ResizeObserver","observe","useDelay","timeoutId","useEventCallback","_len4","args","_key4","setRef","useForkRef","refA","refB","refValue","useLoseFocus","disabled","focused","onFocus","onBlur","useRTL","isRTL","setIsRTL","document","documentElement","direction","useSensors","subscribers","notifySubscribers","isPropagationStopped","registerSensors","onPointerMove","onPointerUp","onPointerLeave","onPointerCancel","onKeyUp","subscribeSensors","unshift","listeners","el","useThrottle","lastCallbackTime","delayCallback","executeCallback","Date","now","_len5","_key5","_len6","_key6","slidePrefix","slideImagePrefix","ImageSlide","_ref7","offset","rect","onLoad","_d","_e","_f","_g","status","setStatus","imageRef","handleLoading","img","decode","Promise","resolve","catch","then","parentNode","setImageRef","complete","handleOnLoad","currentTarget","onError","cover","nonInfinite","fallback","isFinite","maxWidth","srcSet","concat","naturalWidth","maxHeight","naturalHeight","defaultStyle","sort","a","b","src","estimateActualWidth","MAX_VALUE","sizes","min","draggable","alt","iconLoading","iconError","SwipeState","usePointerEvents","Gesture","SWIPE_THRESHOLD","usePointerSwipe","isSwipeValid","containerWidth","swipeAnimationDuration","onSwipeStart","onSwipeProgress","onSwipeFinish","onSwipeCancel","pullDownEnabled","onPullDownStart","onPullDownProgress","onPullDownFinish","onPullDownCancel","pointers","activePointer","startTime","gesture","NONE","clearPointer","pointerId","currentPointers","p","addPointer","persist","find","currentOffset","SWIPE","abs","PULL_DOWN","pointer","isCurrentPointer","deltaX","clientX","deltaY","clientY","startGesture","newGesture","WHEEL","preventDefault","ctrlKey","usePreventSwipeNavigation","passive","useWheelSwipe","swipeState","intent","intentCleanup","resetCleanup","wheelResidualMomentum","cancelSwipeIntentCleanup","cancelSwipeResetCleanup","handleCleanup","handleCancelSwipe","currentSwipeOffset","currentSwipeIntent","newSwipeOffset","sign","cssContainerPrefix","ControllerContext","useController","Controller","_ref8","toolbarWidth","setToolbarWidth","setSwipeState","swipeOffset","pullDownOffset","pullDownOpacity","cleanupAnimationIncrement","cleanupSwipeOffset","cleanupPullDownOffset","handleContainerRef","carouselRef","setCarouselRef","rtl","getLightboxProps","getLightboxState","prev","params","next","setSwipeOffset","setProperty","setPullDownOffset","threshold","minOpacity","preparePullDownAnimation","translate","opacity","pullDown","ANIMATION","parsedSpacing","spacingValue","swipeDuration","swipeEasing","count","newSwipeState","newSwipeAnimationDuration","elapsedTime","expectedTime","swipeParams","pullDownParams","focusOnMount","onViewCallback","view","code","slideRect","useImperativeHandle","container","role","tabIndex","controls","ControllerModule","cssPrefix$2","cssSlidePrefix","CarouselSlide","_ref9","click","renderSlide","rendered","slideHeader","slideContainer","_ref10","slideFooter","handleBackdropClick","HTMLElement","classList","Placeholder","Carousel","_ref11","items","i","CarouselModule","NavigationButton","_ref12","Navigation","_ref13","buttonPrev","buttonNext","iconPrev","iconNext","prevDisabled","nextDisabled","throttle","prevThrottled","nextThrottled","handleKeyDown","NavigationModule","noScroll","noScrollPadding","isHTMLElement","element","padScrollbar","property","computedValue","originalValue","getPropertyValue","removeProperty","NoScroll","_ref14","body","scrollbar","innerWidth","elements","getElementsByTagName","add","clean","NoScrollModule","cssPrefix$1","setAttribute","attribute","previousValue","getAttribute","removeAttribute","Portal","_ref15","mounted","setMounted","visible","setVisible","animationDuration","handleClose","exiting","exited","handleEnter","scrollTop","entering","indexOf","tagName","entered","handleExit","handleRef","PortalModule","Root","_ref16","RootModule","cssPrefix","Toolbar","_ref17","buttonClose","iconClose","renderCloseButton","ToolbarModule","renderNode","child","mergeAnimation","defaultAnimation","defaultAnimationEasing","restDefaultAnimation","restAnimation","Lightbox","_ref18","restProps","defaultCarousel","defaultRender","defaultToolbar","defaultController","defaultOn","defaultSlides","defaultIndex","defaultPlugins","restDefaultProps","default"],"sources":["C:/Users/Mohamed/Codementor/2- I need help fixing some styling in React/quion/node_modules/yet-another-react-lightbox/dist/index.js"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport { ACTION_CLOSE, IMAGE_FIT_CONTAIN, MODULE_CONTROLLER, IMAGE_FIT_COVER, UNKNOWN_ACTION_TYPE, ELEMENT_BUTTON, ELEMENT_ICON, EVENT_ON_POINTER_DOWN, EVENT_ON_POINTER_MOVE, EVENT_ON_POINTER_UP, EVENT_ON_POINTER_LEAVE, EVENT_ON_POINTER_CANCEL, EVENT_ON_KEY_DOWN, EVENT_ON_KEY_UP, EVENT_ON_WHEEL, SLIDE_STATUS_LOADING, activeSlideStatus, SLIDE_STATUS_COMPLETE, SLIDE_STATUS_ERROR, SLIDE_STATUS_PLACEHOLDER, ACTION_PREV, ACTION_NEXT, ACTION_SWIPE, VK_ESCAPE, CLASS_FLEX_CENTER, MODULE_CAROUSEL, CLASS_FULLSIZE, VK_ARROW_LEFT, VK_ARROW_RIGHT, MODULE_NAVIGATION, CLASS_NO_SCROLL, CLASS_NO_SCROLL_PADDING, MODULE_NO_SCROLL, MODULE_PORTAL, MODULE_ROOT, MODULE_TOOLBAR } from './types.js';\nimport { createPortal } from 'react-dom';\nexport { ACTIVE_SLIDE_COMPLETE, ACTIVE_SLIDE_ERROR, ACTIVE_SLIDE_LOADING, ACTIVE_SLIDE_PLAYING, PLUGIN_CAPTIONS, PLUGIN_COUNTER, PLUGIN_DOWNLOAD, PLUGIN_FULLSCREEN, PLUGIN_INLINE, PLUGIN_SHARE, PLUGIN_SLIDESHOW, PLUGIN_THUMBNAILS, PLUGIN_ZOOM, SLIDE_STATUS_PLAYING } from './types.js';\n\nconst LightboxDefaultProps = {\n    open: false,\n    close: () => { },\n    index: 0,\n    slides: [],\n    render: {},\n    plugins: [],\n    toolbar: { buttons: [ACTION_CLOSE] },\n    labels: {},\n    animation: {\n        fade: 250,\n        swipe: 500,\n        easing: {\n            fade: \"ease\",\n            swipe: \"ease-out\",\n            navigation: \"ease-in-out\",\n        },\n    },\n    carousel: {\n        finite: false,\n        preload: 2,\n        padding: \"16px\",\n        spacing: \"30%\",\n        imageFit: IMAGE_FIT_CONTAIN,\n    },\n    controller: {\n        ref: null,\n        focus: true,\n        aria: false,\n        touchAction: \"none\",\n        closeOnPullDown: false,\n        closeOnBackdropClick: false,\n    },\n    portal: {},\n    on: {},\n    styles: {},\n    className: \"\",\n};\n\nfunction createModule(name, component) {\n    return { name, component };\n}\nfunction createNode(module, children) {\n    return { module, children };\n}\nfunction traverseNode(node, target, apply) {\n    if (node.module.name === target) {\n        return apply(node);\n    }\n    if (node.children) {\n        return [\n            createNode(node.module, node.children.flatMap((n) => { var _a; return (_a = traverseNode(n, target, apply)) !== null && _a !== void 0 ? _a : []; })),\n        ];\n    }\n    return [node];\n}\nfunction traverse(nodes, target, apply) {\n    return nodes.flatMap((node) => { var _a; return (_a = traverseNode(node, target, apply)) !== null && _a !== void 0 ? _a : []; });\n}\nfunction withPlugins(root, plugins = [], augmentations = []) {\n    let config = root;\n    const contains = (target) => {\n        const nodes = [...config];\n        while (nodes.length > 0) {\n            const node = nodes.pop();\n            if ((node === null || node === void 0 ? void 0 : node.module.name) === target)\n                return true;\n            if (node === null || node === void 0 ? void 0 : node.children)\n                nodes.push(...node.children);\n        }\n        return false;\n    };\n    const addParent = (target, module) => {\n        if (target === \"\") {\n            config = [createNode(module, config)];\n            return;\n        }\n        config = traverse(config, target, (node) => [createNode(module, [node])]);\n    };\n    const append = (target, module) => {\n        config = traverse(config, target, (node) => [createNode(node.module, [createNode(module, node.children)])]);\n    };\n    const addChild = (target, module, precede) => {\n        config = traverse(config, target, (node) => {\n            var _a;\n            return [\n                createNode(node.module, [\n                    ...(precede ? [createNode(module)] : []),\n                    ...((_a = node.children) !== null && _a !== void 0 ? _a : []),\n                    ...(!precede ? [createNode(module)] : []),\n                ]),\n            ];\n        });\n    };\n    const addSibling = (target, module, precede) => {\n        config = traverse(config, target, (node) => [\n            ...(precede ? [createNode(module)] : []),\n            node,\n            ...(!precede ? [createNode(module)] : []),\n        ]);\n    };\n    const addModule = (module) => {\n        append(MODULE_CONTROLLER, module);\n    };\n    const replace = (target, module) => {\n        config = traverse(config, target, (node) => [createNode(module, node.children)]);\n    };\n    const remove = (target) => {\n        config = traverse(config, target, (node) => node.children);\n    };\n    const augment = (augmentation) => {\n        augmentations.push(augmentation);\n    };\n    plugins.forEach((plugin) => {\n        plugin({\n            contains,\n            addParent,\n            append,\n            addChild,\n            addSibling,\n            addModule,\n            replace,\n            remove,\n            augment,\n        });\n    });\n    return {\n        config,\n        augmentation: (props) => augmentations.reduce((acc, augmentation) => augmentation(acc), props),\n    };\n}\n\nconst clsx = (...classes) => [...classes].filter((cls) => Boolean(cls)).join(\" \");\nconst cssPrefix$3 = \"yarl__\";\nconst cssClass = (name) => `${cssPrefix$3}${name}`;\nconst cssVar = (name) => `--${cssPrefix$3}${name}`;\nconst composePrefix = (base, prefix) => `${base}${prefix ? `_${prefix}` : \"\"}`;\nconst makeComposePrefix = (base) => (prefix) => composePrefix(base, prefix);\nconst label = (labels, lbl) => (labels && labels[lbl] ? labels[lbl] : lbl);\nconst cleanup = (...cleaners) => () => {\n    cleaners.forEach((cleaner) => {\n        cleaner();\n    });\n};\nconst makeUseContext = (name, contextName, context) => () => {\n    const ctx = React.useContext(context);\n    if (!ctx) {\n        throw new Error(`${name} must be used within a ${contextName}.Provider`);\n    }\n    return ctx;\n};\nconst hasWindow = () => typeof window !== \"undefined\";\nfunction round(value, decimals = 0) {\n    const factor = 10 ** decimals;\n    return Math.round((value + Number.EPSILON) * factor) / factor;\n}\nconst isImageSlide = (slide) => slide.type === undefined || slide.type === \"image\";\nconst isImageFitCover = (image, imageFit) => image.imageFit === IMAGE_FIT_COVER || (image.imageFit !== IMAGE_FIT_CONTAIN && imageFit === IMAGE_FIT_COVER);\nfunction parseLengthPercentage(input) {\n    if (typeof input === \"number\") {\n        return { pixel: input };\n    }\n    if (typeof input === \"string\") {\n        const value = parseInt(input, 10);\n        return input.endsWith(\"%\") ? { percent: value } : { pixel: value };\n    }\n    return { pixel: 0 };\n}\nfunction computeSlideRect(containerRect, padding) {\n    const paddingValue = parseLengthPercentage(padding);\n    const paddingPixels = paddingValue.percent !== undefined ? (containerRect.width / 100) * paddingValue.percent : paddingValue.pixel;\n    return {\n        width: Math.max(containerRect.width - 2 * paddingPixels, 0),\n        height: Math.max(containerRect.height - 2 * paddingPixels, 0),\n    };\n}\nconst devicePixelRatio = () => (hasWindow() ? window === null || window === void 0 ? void 0 : window.devicePixelRatio : undefined) || 1;\nconst getSlideIndex = (index, slidesCount) => slidesCount > 0 ? ((index % slidesCount) + slidesCount) % slidesCount : 0;\nconst hasSlides = (slides) => slides.length > 0;\nconst getSlide = (slides, index) => slides[getSlideIndex(index, slides.length)];\nconst getSlideIfPresent = (slides, index) => hasSlides(slides) ? getSlide(slides, index) : undefined;\nfunction addToolbarButton(toolbar, key, button) {\n    if (!button)\n        return toolbar;\n    const { buttons, ...restToolbar } = toolbar;\n    const index = buttons.findIndex((item) => item === key);\n    const buttonWithKey = React.isValidElement(button) ? React.cloneElement(button, { key }, null) : button;\n    if (index >= 0) {\n        const result = [...buttons];\n        result.splice(index, 1, buttonWithKey);\n        return { buttons: result, ...restToolbar };\n    }\n    return { buttons: [buttonWithKey, ...buttons], ...restToolbar };\n}\nfunction stopNavigationEventsPropagation() {\n    const stopPropagation = (event) => {\n        event.stopPropagation();\n    };\n    return { onPointerDown: stopPropagation, onKeyDown: stopPropagation, onWheel: stopPropagation };\n}\n\nconst EventsContext = React.createContext(null);\nconst useEvents = makeUseContext(\"useEvents\", \"EventsContext\", EventsContext);\nfunction EventsProvider({ children }) {\n    const [subscriptions] = React.useState({});\n    React.useEffect(() => () => {\n        Object.keys(subscriptions).forEach((topic) => delete subscriptions[topic]);\n    }, [subscriptions]);\n    const context = React.useMemo(() => {\n        const unsubscribe = (topic, callback) => {\n            var _a;\n            (_a = subscriptions[topic]) === null || _a === void 0 ? void 0 : _a.splice(0, subscriptions[topic].length, ...subscriptions[topic].filter((cb) => cb !== callback));\n        };\n        const subscribe = (topic, callback) => {\n            if (!subscriptions[topic]) {\n                subscriptions[topic] = [];\n            }\n            subscriptions[topic].push(callback);\n            return () => unsubscribe(topic, callback);\n        };\n        const publish = (...[topic, event]) => {\n            var _a;\n            (_a = subscriptions[topic]) === null || _a === void 0 ? void 0 : _a.forEach((callback) => callback(event));\n        };\n        return { publish, subscribe, unsubscribe };\n    }, [subscriptions]);\n    return React.createElement(EventsContext.Provider, { value: context }, children);\n}\n\nconst LightboxPropsContext = React.createContext(null);\nconst useLightboxProps = makeUseContext(\"useLightboxProps\", \"LightboxPropsContext\", LightboxPropsContext);\nfunction LightboxPropsProvider({ children, ...props }) {\n    return React.createElement(LightboxPropsContext.Provider, { value: props }, children);\n}\n\nconst LightboxStateContext = React.createContext(null);\nconst useLightboxState = makeUseContext(\"useLightboxState\", \"LightboxStateContext\", LightboxStateContext);\nconst LightboxDispatchContext = React.createContext(null);\nconst useLightboxDispatch = makeUseContext(\"useLightboxDispatch\", \"LightboxDispatchContext\", LightboxDispatchContext);\nfunction reducer(state, action) {\n    switch (action.type) {\n        case \"swipe\": {\n            const { slides } = state;\n            const increment = (action === null || action === void 0 ? void 0 : action.increment) || 0;\n            const globalIndex = state.globalIndex + increment;\n            const currentIndex = getSlideIndex(globalIndex, slides.length);\n            const currentSlide = getSlideIfPresent(slides, currentIndex);\n            const animation = increment || action.duration\n                ? {\n                    increment,\n                    duration: action.duration,\n                    easing: action.easing,\n                }\n                : undefined;\n            return { slides, currentIndex, globalIndex, currentSlide, animation };\n        }\n        case \"update\":\n            return {\n                slides: action.slides,\n                currentIndex: action.index,\n                globalIndex: action.index,\n                currentSlide: getSlideIfPresent(action.slides, action.index),\n            };\n        default:\n            throw new Error(UNKNOWN_ACTION_TYPE);\n    }\n}\nfunction LightboxStateProvider({ slides, index, children }) {\n    const [state, dispatch] = React.useReducer(reducer, {\n        slides,\n        currentIndex: index,\n        globalIndex: index,\n        currentSlide: getSlideIfPresent(slides, index),\n    });\n    React.useEffect(() => {\n        dispatch({ type: \"update\", slides, index });\n    }, [slides, index]);\n    const context = React.useMemo(() => ({ ...state, state, dispatch }), [state, dispatch]);\n    return (React.createElement(LightboxDispatchContext.Provider, { value: dispatch },\n        React.createElement(LightboxStateContext.Provider, { value: context }, children)));\n}\n\nconst TimeoutsContext = React.createContext(null);\nconst useTimeouts = makeUseContext(\"useTimeouts\", \"TimeoutsContext\", TimeoutsContext);\nfunction TimeoutsProvider({ children }) {\n    const [timeouts] = React.useState([]);\n    React.useEffect(() => () => {\n        timeouts.forEach((tid) => window.clearTimeout(tid));\n        timeouts.splice(0, timeouts.length);\n    }, [timeouts]);\n    const context = React.useMemo(() => {\n        const removeTimeout = (id) => {\n            timeouts.splice(0, timeouts.length, ...timeouts.filter((tid) => tid !== id));\n        };\n        const setTimeout = (fn, delay) => {\n            const id = window.setTimeout(() => {\n                removeTimeout(id);\n                fn();\n            }, delay);\n            timeouts.push(id);\n            return id;\n        };\n        const clearTimeout = (id) => {\n            if (id !== undefined) {\n                removeTimeout(id);\n                window.clearTimeout(id);\n            }\n        };\n        return { setTimeout, clearTimeout };\n    }, [timeouts]);\n    return React.createElement(TimeoutsContext.Provider, { value: context }, children);\n}\n\nconst IconButton = React.forwardRef(function IconButton({ label: label$1, className, icon: Icon, renderIcon, onClick, style, ...rest }, ref) {\n    const { styles, labels } = useLightboxProps();\n    return (React.createElement(\"button\", { ref: ref, type: \"button\", \"aria-label\": label(labels, label$1), className: clsx(cssClass(ELEMENT_BUTTON), className), onClick: onClick, style: { ...style, ...styles.button }, ...rest }, renderIcon ? renderIcon() : React.createElement(Icon, { className: cssClass(ELEMENT_ICON), style: styles.icon })));\n});\n\nfunction svgIcon(name, children) {\n    const icon = (props) => (React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 24 24\", width: \"24\", height: \"24\", \"aria-hidden\": \"true\", focusable: \"false\", ...props }, children));\n    icon.displayName = name;\n    return icon;\n}\nfunction createIcon(name, glyph) {\n    return svgIcon(name, React.createElement(\"g\", { fill: \"currentColor\" },\n        React.createElement(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }),\n        glyph));\n}\nfunction createIconDisabled(name, glyph) {\n    return svgIcon(name, React.createElement(React.Fragment, null,\n        React.createElement(\"defs\", null,\n            React.createElement(\"mask\", { id: \"strike\" },\n                React.createElement(\"path\", { d: \"M0 0h24v24H0z\", fill: \"white\" }),\n                React.createElement(\"path\", { d: \"M0 0L24 24\", stroke: \"black\", strokeWidth: 4 }))),\n        React.createElement(\"path\", { d: \"M0.70707 2.121320L21.878680 23.292883\", stroke: \"currentColor\", strokeWidth: 2 }),\n        React.createElement(\"g\", { fill: \"currentColor\", mask: \"url(#strike)\" },\n            React.createElement(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }),\n            glyph)));\n}\nconst CloseIcon = createIcon(\"Close\", React.createElement(\"path\", { d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" }));\nconst PreviousIcon = createIcon(\"Previous\", React.createElement(\"path\", { d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\" }));\nconst NextIcon = createIcon(\"Next\", React.createElement(\"path\", { d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\" }));\nconst LoadingIcon = createIcon(\"Loading\", React.createElement(React.Fragment, null, Array.from({ length: 8 }).map((_, index, array) => (React.createElement(\"line\", { key: index, x1: \"12\", y1: \"6.5\", x2: \"12\", y2: \"1.8\", strokeLinecap: \"round\", strokeWidth: \"2.6\", stroke: \"currentColor\", strokeOpacity: (1 / array.length) * (index + 1), transform: `rotate(${(360 / array.length) * index}, 12, 12)` })))));\nconst ErrorIcon = createIcon(\"Error\", React.createElement(\"path\", { d: \"M21.9,21.9l-8.49-8.49l0,0L3.59,3.59l0,0L2.1,2.1L0.69,3.51L3,5.83V19c0,1.1,0.9,2,2,2h13.17l2.31,2.31L21.9,21.9z M5,18 l3.5-4.5l2.5,3.01L12.17,15l3,3H5z M21,18.17L5.83,3H19c1.1,0,2,0.9,2,2V18.17z\" }));\n\nconst useLayoutEffect = hasWindow() ? React.useLayoutEffect : React.useEffect;\n\nfunction useMotionPreference() {\n    const [reduceMotion, setReduceMotion] = React.useState(false);\n    React.useEffect(() => {\n        var _a, _b;\n        const mediaQuery = (_a = window.matchMedia) === null || _a === void 0 ? void 0 : _a.call(window, \"(prefers-reduced-motion: reduce)\");\n        setReduceMotion(mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.matches);\n        const listener = (event) => setReduceMotion(event.matches);\n        (_b = mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.addEventListener) === null || _b === void 0 ? void 0 : _b.call(mediaQuery, \"change\", listener);\n        return () => { var _a; return (_a = mediaQuery === null || mediaQuery === void 0 ? void 0 : mediaQuery.removeEventListener) === null || _a === void 0 ? void 0 : _a.call(mediaQuery, \"change\", listener); };\n    }, []);\n    return reduceMotion;\n}\n\nfunction currentTransformation(node) {\n    let x = 0;\n    let y = 0;\n    let z = 0;\n    const matrix = window.getComputedStyle(node).transform;\n    const matcher = matrix.match(/matrix.*\\((.+)\\)/);\n    if (matcher) {\n        const values = matcher[1].split(\",\").map((str) => Number.parseInt(str, 10));\n        if (values.length === 6) {\n            x = values[4];\n            y = values[5];\n        }\n        else if (values.length === 16) {\n            x = values[12];\n            y = values[13];\n            z = values[14];\n        }\n    }\n    return { x, y, z };\n}\nfunction useAnimation(nodeRef, computeAnimation) {\n    const snapshot = React.useRef();\n    const animation = React.useRef();\n    const reduceMotion = useMotionPreference();\n    useLayoutEffect(() => {\n        var _a, _b, _c;\n        if (nodeRef.current && snapshot.current !== undefined && !reduceMotion) {\n            const { keyframes, duration, easing, onfinish } = computeAnimation(snapshot.current, nodeRef.current.getBoundingClientRect(), currentTransformation(nodeRef.current)) || {};\n            if (keyframes && duration) {\n                (_a = animation.current) === null || _a === void 0 ? void 0 : _a.cancel();\n                animation.current = undefined;\n                try {\n                    animation.current = (_c = (_b = nodeRef.current).animate) === null || _c === void 0 ? void 0 : _c.call(_b, keyframes, { duration, easing });\n                }\n                catch (err) {\n                    console.error(err);\n                }\n                if (animation.current) {\n                    animation.current.onfinish = () => {\n                        animation.current = undefined;\n                        onfinish === null || onfinish === void 0 ? void 0 : onfinish();\n                    };\n                }\n            }\n        }\n        snapshot.current = undefined;\n    });\n    return {\n        prepareAnimation: (currentSnapshot) => {\n            snapshot.current = currentSnapshot;\n        },\n        isAnimationPlaying: () => { var _a; return ((_a = animation.current) === null || _a === void 0 ? void 0 : _a.playState) === \"running\"; },\n    };\n}\n\nfunction useContainerRect() {\n    const [containerRect, setContainerRect] = React.useState();\n    const containerRef = React.useRef(null);\n    const observerRef = React.useRef();\n    const setContainerRef = React.useCallback((node) => {\n        containerRef.current = node;\n        if (observerRef.current) {\n            observerRef.current.disconnect();\n            observerRef.current = undefined;\n        }\n        const updateContainerRect = () => {\n            if (node) {\n                const styles = window.getComputedStyle(node);\n                const parse = (value) => parseFloat(value) || 0;\n                setContainerRect({\n                    width: Math.round(node.clientWidth - parse(styles.paddingLeft) - parse(styles.paddingRight)),\n                    height: Math.round(node.clientHeight - parse(styles.paddingTop) - parse(styles.paddingBottom)),\n                });\n            }\n            else {\n                setContainerRect(undefined);\n            }\n        };\n        updateContainerRect();\n        if (node && typeof ResizeObserver !== \"undefined\") {\n            observerRef.current = new ResizeObserver(updateContainerRect);\n            observerRef.current.observe(node);\n        }\n    }, []);\n    return React.useMemo(() => ({\n        setContainerRef,\n        containerRef,\n        containerRect,\n    }), [setContainerRef, containerRef, containerRect]);\n}\n\nfunction useDelay() {\n    const timeoutId = React.useRef();\n    const { setTimeout, clearTimeout } = useTimeouts();\n    return React.useCallback((callback, delay) => {\n        clearTimeout(timeoutId.current);\n        timeoutId.current = setTimeout(callback, delay > 0 ? delay : 0);\n    }, [setTimeout, clearTimeout]);\n}\n\nfunction useEventCallback(fn) {\n    const ref = React.useRef(fn);\n    useLayoutEffect(() => {\n        ref.current = fn;\n    });\n    return React.useCallback((...args) => { var _a; return (_a = ref.current) === null || _a === void 0 ? void 0 : _a.call(ref, ...args); }, []);\n}\n\nfunction setRef(ref, value) {\n    if (typeof ref === \"function\") {\n        ref(value);\n    }\n    else if (ref) {\n        ref.current = value;\n    }\n}\nfunction useForkRef(refA, refB) {\n    return React.useMemo(() => refA == null && refB == null\n        ? null\n        : (refValue) => {\n            setRef(refA, refValue);\n            setRef(refB, refValue);\n        }, [refA, refB]);\n}\n\nfunction useLoseFocus(focus, disabled = false) {\n    const focused = React.useRef(disabled);\n    useLayoutEffect(() => {\n        if (disabled) {\n            focus();\n        }\n    }, [disabled, focus]);\n    const onFocus = React.useCallback(() => {\n        focused.current = true;\n    }, []);\n    const onBlur = React.useCallback(() => {\n        focused.current = false;\n    }, []);\n    return { onFocus, onBlur };\n}\n\nfunction useRTL() {\n    const [isRTL, setIsRTL] = React.useState(false);\n    useLayoutEffect(() => {\n        setIsRTL(window.getComputedStyle(window.document.documentElement).direction === \"rtl\");\n    }, []);\n    return isRTL;\n}\n\nfunction useSensors() {\n    const [subscribers] = React.useState({});\n    return React.useMemo(() => {\n        const notifySubscribers = (type, event) => {\n            var _a;\n            (_a = subscribers[type]) === null || _a === void 0 ? void 0 : _a.forEach((listener) => {\n                if (!event.isPropagationStopped())\n                    listener(event);\n            });\n        };\n        return {\n            registerSensors: {\n                onPointerDown: (event) => notifySubscribers(EVENT_ON_POINTER_DOWN, event),\n                onPointerMove: (event) => notifySubscribers(EVENT_ON_POINTER_MOVE, event),\n                onPointerUp: (event) => notifySubscribers(EVENT_ON_POINTER_UP, event),\n                onPointerLeave: (event) => notifySubscribers(EVENT_ON_POINTER_LEAVE, event),\n                onPointerCancel: (event) => notifySubscribers(EVENT_ON_POINTER_CANCEL, event),\n                onKeyDown: (event) => notifySubscribers(EVENT_ON_KEY_DOWN, event),\n                onKeyUp: (event) => notifySubscribers(EVENT_ON_KEY_UP, event),\n                onWheel: (event) => notifySubscribers(EVENT_ON_WHEEL, event),\n            },\n            subscribeSensors: (type, callback) => {\n                if (!subscribers[type]) {\n                    subscribers[type] = [];\n                }\n                subscribers[type].unshift(callback);\n                return () => {\n                    const listeners = subscribers[type];\n                    if (listeners) {\n                        listeners.splice(0, listeners.length, ...listeners.filter((el) => el !== callback));\n                    }\n                };\n            },\n        };\n    }, [subscribers]);\n}\n\nfunction useThrottle(callback, delay) {\n    const lastCallbackTime = React.useRef(0);\n    const delayCallback = useDelay();\n    const executeCallback = useEventCallback((...args) => {\n        lastCallbackTime.current = Date.now();\n        callback(args);\n    });\n    return React.useCallback((...args) => {\n        delayCallback(() => {\n            executeCallback(args);\n        }, delay - (Date.now() - lastCallbackTime.current));\n    }, [delay, executeCallback, delayCallback]);\n}\n\nconst slidePrefix = makeComposePrefix(\"slide\");\nconst slideImagePrefix = makeComposePrefix(\"slide_image\");\nfunction ImageSlide({ slide: image, offset, render, rect, imageFit, onClick, onLoad, style }) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    const [status, setStatus] = React.useState(SLIDE_STATUS_LOADING);\n    const { publish } = useEvents();\n    const { setTimeout } = useTimeouts();\n    const imageRef = React.useRef(null);\n    React.useEffect(() => {\n        if (offset === 0) {\n            publish(activeSlideStatus(status));\n        }\n    }, [offset, status, publish]);\n    const handleLoading = useEventCallback((img) => {\n        (\"decode\" in img ? img.decode() : Promise.resolve())\n            .catch(() => { })\n            .then(() => {\n            if (!img.parentNode) {\n                return;\n            }\n            setStatus(SLIDE_STATUS_COMPLETE);\n            setTimeout(() => {\n                onLoad === null || onLoad === void 0 ? void 0 : onLoad(img);\n            }, 0);\n        });\n    });\n    const setImageRef = React.useCallback((img) => {\n        imageRef.current = img;\n        if (img === null || img === void 0 ? void 0 : img.complete) {\n            handleLoading(img);\n        }\n    }, [handleLoading]);\n    const handleOnLoad = React.useCallback((event) => {\n        handleLoading(event.currentTarget);\n    }, [handleLoading]);\n    const onError = React.useCallback(() => {\n        setStatus(SLIDE_STATUS_ERROR);\n    }, []);\n    const cover = isImageFitCover(image, imageFit);\n    const nonInfinite = (value, fallback) => (Number.isFinite(value) ? value : fallback);\n    const maxWidth = nonInfinite(Math.max(...((_b = (_a = image.srcSet) === null || _a === void 0 ? void 0 : _a.map((x) => x.width)) !== null && _b !== void 0 ? _b : []).concat(image.width ? [image.width] : [])), ((_c = imageRef.current) === null || _c === void 0 ? void 0 : _c.naturalWidth) || 0);\n    const maxHeight = nonInfinite(Math.max(...((_e = (_d = image.srcSet) === null || _d === void 0 ? void 0 : _d.map((x) => x.height)) !== null && _e !== void 0 ? _e : []).concat(image.height ? [image.height] : [])), ((_f = imageRef.current) === null || _f === void 0 ? void 0 : _f.naturalHeight) || 0);\n    const defaultStyle = maxWidth && maxHeight\n        ? {\n            maxWidth: `min(${maxWidth}px, 100%)`,\n            maxHeight: `min(${maxHeight}px, 100%)`,\n        }\n        : {\n            maxWidth: \"100%\",\n            maxHeight: \"100%\",\n        };\n    const srcSet = (_g = image.srcSet) === null || _g === void 0 ? void 0 : _g.sort((a, b) => a.width - b.width).map((item) => `${item.src} ${item.width}w`).join(\", \");\n    const estimateActualWidth = () => rect && !cover && image.width && image.height ? (rect.height / image.height) * image.width : Number.MAX_VALUE;\n    const sizes = srcSet && rect && hasWindow() ? `${Math.round(Math.min(estimateActualWidth(), rect.width))}px` : undefined;\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"img\", { ref: setImageRef, onLoad: handleOnLoad, onError: onError, onClick: onClick, className: clsx(cssClass(slideImagePrefix()), cover && cssClass(slideImagePrefix(\"cover\")), status !== SLIDE_STATUS_COMPLETE && cssClass(slideImagePrefix(\"loading\"))), draggable: false, alt: image.alt, style: { ...defaultStyle, ...style }, sizes: sizes, srcSet: srcSet, src: image.src }),\n        status !== SLIDE_STATUS_COMPLETE && (React.createElement(\"div\", { className: cssClass(slidePrefix(SLIDE_STATUS_PLACEHOLDER)) },\n            status === SLIDE_STATUS_LOADING &&\n                ((render === null || render === void 0 ? void 0 : render.iconLoading) ? (render.iconLoading()) : (React.createElement(LoadingIcon, { className: clsx(cssClass(ELEMENT_ICON), cssClass(slidePrefix(SLIDE_STATUS_LOADING))) }))),\n            status === SLIDE_STATUS_ERROR &&\n                ((render === null || render === void 0 ? void 0 : render.iconError) ? (render.iconError()) : (React.createElement(ErrorIcon, { className: clsx(cssClass(ELEMENT_ICON), cssClass(slidePrefix(SLIDE_STATUS_ERROR))) })))))));\n}\n\nvar SwipeState;\n(function (SwipeState) {\n    SwipeState[SwipeState[\"NONE\"] = 0] = \"NONE\";\n    SwipeState[SwipeState[\"SWIPE\"] = 1] = \"SWIPE\";\n    SwipeState[SwipeState[\"PULL_DOWN\"] = 2] = \"PULL_DOWN\";\n    SwipeState[SwipeState[\"ANIMATION\"] = 3] = \"ANIMATION\";\n})(SwipeState || (SwipeState = {}));\n\nfunction usePointerEvents(subscribeSensors, onPointerDown, onPointerMove, onPointerUp, disabled) {\n    React.useEffect(() => {\n        if (disabled)\n            return () => { };\n        return cleanup(subscribeSensors(EVENT_ON_POINTER_DOWN, onPointerDown), subscribeSensors(EVENT_ON_POINTER_MOVE, onPointerMove), subscribeSensors(EVENT_ON_POINTER_UP, onPointerUp), subscribeSensors(EVENT_ON_POINTER_LEAVE, onPointerUp), subscribeSensors(EVENT_ON_POINTER_CANCEL, onPointerUp));\n    }, [subscribeSensors, onPointerDown, onPointerMove, onPointerUp, disabled]);\n}\n\nvar Gesture;\n(function (Gesture) {\n    Gesture[Gesture[\"NONE\"] = 0] = \"NONE\";\n    Gesture[Gesture[\"SWIPE\"] = 1] = \"SWIPE\";\n    Gesture[Gesture[\"PULL_DOWN\"] = 2] = \"PULL_DOWN\";\n})(Gesture || (Gesture = {}));\nconst SWIPE_THRESHOLD = 30;\nfunction usePointerSwipe(subscribeSensors, isSwipeValid, containerWidth, swipeAnimationDuration, onSwipeStart, onSwipeProgress, onSwipeFinish, onSwipeCancel, pullDownEnabled, onPullDownStart, onPullDownProgress, onPullDownFinish, onPullDownCancel) {\n    const offset = React.useRef(0);\n    const pointers = React.useRef([]);\n    const activePointer = React.useRef();\n    const startTime = React.useRef(0);\n    const gesture = React.useRef(Gesture.NONE);\n    const clearPointer = React.useCallback((event) => {\n        if (activePointer.current === event.pointerId) {\n            activePointer.current = undefined;\n            gesture.current = Gesture.NONE;\n        }\n        const currentPointers = pointers.current;\n        currentPointers.splice(0, currentPointers.length, ...currentPointers.filter((p) => p.pointerId !== event.pointerId));\n    }, []);\n    const addPointer = React.useCallback((event) => {\n        clearPointer(event);\n        event.persist();\n        pointers.current.push(event);\n    }, [clearPointer]);\n    const onPointerDown = useEventCallback((event) => {\n        addPointer(event);\n    });\n    const onPointerUp = useEventCallback((event) => {\n        if (pointers.current.find((x) => x.pointerId === event.pointerId) &&\n            activePointer.current === event.pointerId) {\n            const duration = Date.now() - startTime.current;\n            const currentOffset = offset.current;\n            if (gesture.current === Gesture.SWIPE) {\n                if (Math.abs(currentOffset) > 0.3 * containerWidth ||\n                    (Math.abs(currentOffset) > 5 && duration < swipeAnimationDuration)) {\n                    onSwipeFinish(currentOffset, duration);\n                }\n                else {\n                    onSwipeCancel(currentOffset);\n                }\n            }\n            else if (gesture.current === Gesture.PULL_DOWN) {\n                if (currentOffset > 2 * SWIPE_THRESHOLD) {\n                    onPullDownFinish(currentOffset, duration);\n                }\n                else {\n                    onPullDownCancel(currentOffset);\n                }\n            }\n            offset.current = 0;\n            gesture.current = Gesture.NONE;\n        }\n        clearPointer(event);\n    });\n    const onPointerMove = useEventCallback((event) => {\n        const pointer = pointers.current.find((p) => p.pointerId === event.pointerId);\n        if (pointer) {\n            const isCurrentPointer = activePointer.current === event.pointerId;\n            if (event.buttons === 0) {\n                if (isCurrentPointer && offset.current !== 0) {\n                    onPointerUp(event);\n                }\n                else {\n                    clearPointer(pointer);\n                }\n                return;\n            }\n            const deltaX = event.clientX - pointer.clientX;\n            const deltaY = event.clientY - pointer.clientY;\n            if (activePointer.current === undefined) {\n                const startGesture = (newGesture) => {\n                    addPointer(event);\n                    activePointer.current = event.pointerId;\n                    startTime.current = Date.now();\n                    gesture.current = newGesture;\n                };\n                if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > SWIPE_THRESHOLD && isSwipeValid(deltaX)) {\n                    startGesture(Gesture.SWIPE);\n                    onSwipeStart();\n                }\n                else if (pullDownEnabled && Math.abs(deltaY) > Math.abs(deltaX) && deltaY > SWIPE_THRESHOLD) {\n                    startGesture(Gesture.PULL_DOWN);\n                    onPullDownStart();\n                }\n            }\n            else if (isCurrentPointer) {\n                if (gesture.current === Gesture.SWIPE) {\n                    offset.current = deltaX;\n                    onSwipeProgress(deltaX);\n                }\n                else if (gesture.current === Gesture.PULL_DOWN) {\n                    offset.current = deltaY;\n                    onPullDownProgress(deltaY);\n                }\n            }\n        }\n    });\n    usePointerEvents(subscribeSensors, onPointerDown, onPointerMove, onPointerUp);\n}\n\nconst WHEEL = \"wheel\";\nfunction preventDefault(event) {\n    if (Math.abs(event.deltaX) > Math.abs(event.deltaY) || event.ctrlKey) {\n        event.preventDefault();\n    }\n}\nfunction usePreventSwipeNavigation() {\n    const ref = React.useRef(null);\n    return React.useCallback((node) => {\n        var _a;\n        if (node) {\n            node.addEventListener(WHEEL, preventDefault, { passive: false });\n        }\n        else {\n            (_a = ref.current) === null || _a === void 0 ? void 0 : _a.removeEventListener(WHEEL, preventDefault);\n        }\n        ref.current = node;\n    }, []);\n}\n\nfunction useWheelSwipe(swipeState, subscribeSensors, isSwipeValid, containerWidth, swipeAnimationDuration, onSwipeStart, onSwipeProgress, onSwipeFinish, onSwipeCancel) {\n    const offset = React.useRef(0);\n    const intent = React.useRef(0);\n    const intentCleanup = React.useRef();\n    const resetCleanup = React.useRef();\n    const wheelResidualMomentum = React.useRef(0);\n    const startTime = React.useRef(0);\n    const { setTimeout, clearTimeout } = useTimeouts();\n    const cancelSwipeIntentCleanup = React.useCallback(() => {\n        if (intentCleanup.current) {\n            clearTimeout(intentCleanup.current);\n            intentCleanup.current = undefined;\n        }\n    }, [clearTimeout]);\n    const cancelSwipeResetCleanup = React.useCallback(() => {\n        if (resetCleanup.current) {\n            clearTimeout(resetCleanup.current);\n            resetCleanup.current = undefined;\n        }\n    }, [clearTimeout]);\n    const handleCleanup = useEventCallback(() => {\n        if (swipeState !== SwipeState.SWIPE) {\n            offset.current = 0;\n            startTime.current = 0;\n            cancelSwipeIntentCleanup();\n            cancelSwipeResetCleanup();\n        }\n    });\n    React.useEffect(handleCleanup, [swipeState, handleCleanup]);\n    const handleCancelSwipe = useEventCallback((currentSwipeOffset) => {\n        resetCleanup.current = undefined;\n        if (offset.current === currentSwipeOffset) {\n            onSwipeCancel(offset.current);\n        }\n    });\n    const onWheel = useEventCallback((event) => {\n        if (event.ctrlKey) {\n            return;\n        }\n        if (Math.abs(event.deltaY) > Math.abs(event.deltaX)) {\n            return;\n        }\n        if (swipeState === SwipeState.NONE) {\n            if (Math.abs(event.deltaX) <= 1.2 * Math.abs(wheelResidualMomentum.current)) {\n                wheelResidualMomentum.current = event.deltaX;\n                return;\n            }\n            if (!isSwipeValid(-event.deltaX)) {\n                return;\n            }\n            intent.current += event.deltaX;\n            cancelSwipeIntentCleanup();\n            if (Math.abs(intent.current) > 30) {\n                intent.current = 0;\n                wheelResidualMomentum.current = 0;\n                startTime.current = Date.now();\n                onSwipeStart();\n            }\n            else {\n                const currentSwipeIntent = intent.current;\n                intentCleanup.current = setTimeout(() => {\n                    intentCleanup.current = undefined;\n                    if (currentSwipeIntent === intent.current) {\n                        intent.current = 0;\n                    }\n                }, swipeAnimationDuration);\n            }\n        }\n        else if (swipeState === SwipeState.SWIPE) {\n            let newSwipeOffset = offset.current - event.deltaX;\n            newSwipeOffset = Math.min(Math.abs(newSwipeOffset), containerWidth) * Math.sign(newSwipeOffset);\n            offset.current = newSwipeOffset;\n            onSwipeProgress(newSwipeOffset);\n            cancelSwipeResetCleanup();\n            if (Math.abs(newSwipeOffset) > 0.2 * containerWidth) {\n                wheelResidualMomentum.current = event.deltaX;\n                onSwipeFinish(newSwipeOffset, Date.now() - startTime.current);\n                return;\n            }\n            resetCleanup.current = setTimeout(() => handleCancelSwipe(newSwipeOffset), 2 * swipeAnimationDuration);\n        }\n        else {\n            wheelResidualMomentum.current = event.deltaX;\n        }\n    });\n    React.useEffect(() => subscribeSensors(EVENT_ON_WHEEL, onWheel), [subscribeSensors, onWheel]);\n}\n\nconst cssContainerPrefix = makeComposePrefix(\"container\");\nconst ControllerContext = React.createContext(null);\nconst useController = makeUseContext(\"useController\", \"ControllerContext\", ControllerContext);\nfunction Controller({ children, ...props }) {\n    var _a;\n    const { carousel, animation, controller, on, styles, render } = props;\n    const [toolbarWidth, setToolbarWidth] = React.useState();\n    const state = useLightboxState();\n    const dispatch = useLightboxDispatch();\n    const [swipeState, setSwipeState] = React.useState(SwipeState.NONE);\n    const swipeOffset = React.useRef(0);\n    const pullDownOffset = React.useRef(0);\n    const pullDownOpacity = React.useRef(1);\n    const { registerSensors, subscribeSensors } = useSensors();\n    const { subscribe, publish } = useEvents();\n    const cleanupAnimationIncrement = useDelay();\n    const cleanupSwipeOffset = useDelay();\n    const cleanupPullDownOffset = useDelay();\n    const { containerRef, setContainerRef, containerRect } = useContainerRect();\n    const handleContainerRef = useForkRef(usePreventSwipeNavigation(), setContainerRef);\n    const carouselRef = React.useRef(null);\n    const setCarouselRef = useForkRef(carouselRef, undefined);\n    const isRTL = useRTL();\n    const rtl = (value) => (isRTL ? -1 : 1) * (typeof value === \"number\" ? value : 1);\n    const focus = useEventCallback(() => { var _a; return (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.focus(); });\n    const getLightboxProps = useEventCallback(() => props);\n    const getLightboxState = useEventCallback(() => state);\n    const prev = React.useCallback((params) => publish(ACTION_PREV, params), [publish]);\n    const next = React.useCallback((params) => publish(ACTION_NEXT, params), [publish]);\n    const close = React.useCallback(() => publish(ACTION_CLOSE), [publish]);\n    const isSwipeValid = (offset) => !(carousel.finite &&\n        ((rtl(offset) > 0 && state.currentIndex === 0) ||\n            (rtl(offset) < 0 && state.currentIndex === state.slides.length - 1)));\n    const setSwipeOffset = (offset) => {\n        var _a;\n        swipeOffset.current = offset;\n        (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.style.setProperty(cssVar(\"swipe_offset\"), `${Math.round(offset)}px`);\n    };\n    const pullDownEnabled = controller.closeOnPullDown;\n    const setPullDownOffset = (offset) => {\n        var _a, _b;\n        pullDownOffset.current = offset;\n        pullDownOpacity.current = (() => {\n            const threshold = 60;\n            const minOpacity = 0.5;\n            return Math.min(Math.max(round(1 - (offset / threshold) * (1 - minOpacity), 2), minOpacity), 1);\n        })();\n        (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.style.setProperty(cssVar(\"pull_down_offset\"), `${Math.round(offset)}px`);\n        (_b = containerRef.current) === null || _b === void 0 ? void 0 : _b.style.setProperty(cssVar(\"pull_down_opacity\"), `${pullDownOpacity.current}`);\n    };\n    const { prepareAnimation: preparePullDownAnimation } = useAnimation(carouselRef, (snapshot, rect, translate) => {\n        if (carouselRef.current && containerRect) {\n            return {\n                keyframes: [\n                    {\n                        transform: `translate(0, ${snapshot.rect.y - rect.y + translate.y}px)`,\n                        opacity: snapshot.opacity,\n                    },\n                    { transform: \"translate(0, 0)\", opacity: 1 },\n                ],\n                duration: snapshot.duration,\n                easing: animation.easing.fade,\n            };\n        }\n        return undefined;\n    });\n    const pullDown = (offset, cancel) => {\n        if (pullDownEnabled) {\n            setPullDownOffset(offset);\n            let duration = 0;\n            if (carouselRef.current) {\n                duration = animation.fade * (cancel ? 2 : 1);\n                preparePullDownAnimation({\n                    rect: carouselRef.current.getBoundingClientRect(),\n                    opacity: pullDownOpacity.current,\n                    duration,\n                });\n            }\n            cleanupPullDownOffset(() => {\n                setPullDownOffset(0);\n                setSwipeState(SwipeState.NONE);\n            }, duration);\n            setSwipeState(SwipeState.ANIMATION);\n            if (!cancel) {\n                close();\n            }\n        }\n    };\n    const { prepareAnimation, isAnimationPlaying } = useAnimation(carouselRef, (snapshot, rect, translate) => {\n        var _a;\n        if (carouselRef.current && containerRect && ((_a = state.animation) === null || _a === void 0 ? void 0 : _a.duration)) {\n            const parsedSpacing = parseLengthPercentage(carousel.spacing);\n            const spacingValue = (parsedSpacing.percent\n                ? (parsedSpacing.percent * containerRect.width) / 100\n                : parsedSpacing.pixel) || 0;\n            return {\n                keyframes: [\n                    {\n                        transform: `translate(${rtl(state.globalIndex - snapshot.index) * (containerRect.width + spacingValue) +\n                            snapshot.rect.x -\n                            rect.x +\n                            translate.x}px, 0)`,\n                    },\n                    { transform: \"translate(0, 0)\" },\n                ],\n                duration: state.animation.duration,\n                easing: state.animation.easing,\n            };\n        }\n        return undefined;\n    });\n    const swipe = useEventCallback((action) => {\n        var _a, _b;\n        const currentSwipeOffset = action.offset || 0;\n        const swipeDuration = !currentSwipeOffset ? (_a = animation.navigation) !== null && _a !== void 0 ? _a : animation.swipe : animation.swipe;\n        const swipeEasing = !currentSwipeOffset && !isAnimationPlaying() ? animation.easing.navigation : animation.easing.swipe;\n        let { direction } = action;\n        const count = (_b = action.count) !== null && _b !== void 0 ? _b : 1;\n        let newSwipeState = SwipeState.ANIMATION;\n        let newSwipeAnimationDuration = swipeDuration * count;\n        if (!direction) {\n            const containerWidth = containerRect === null || containerRect === void 0 ? void 0 : containerRect.width;\n            const elapsedTime = action.duration || 0;\n            const expectedTime = containerWidth\n                ? (swipeDuration / containerWidth) * Math.abs(currentSwipeOffset)\n                : swipeDuration;\n            if (count !== 0) {\n                if (elapsedTime < expectedTime) {\n                    newSwipeAnimationDuration =\n                        (newSwipeAnimationDuration / expectedTime) * Math.max(elapsedTime, expectedTime / 5);\n                }\n                else if (containerWidth) {\n                    newSwipeAnimationDuration =\n                        (swipeDuration / containerWidth) * (containerWidth - Math.abs(currentSwipeOffset));\n                }\n                direction = rtl(currentSwipeOffset) > 0 ? ACTION_PREV : ACTION_NEXT;\n            }\n            else {\n                newSwipeAnimationDuration = swipeDuration / 2;\n            }\n        }\n        let increment = 0;\n        if (direction === ACTION_PREV) {\n            if (isSwipeValid(rtl(1))) {\n                increment = -count;\n            }\n            else {\n                newSwipeState = SwipeState.NONE;\n                newSwipeAnimationDuration = swipeDuration;\n            }\n        }\n        else if (direction === ACTION_NEXT) {\n            if (isSwipeValid(rtl(-1))) {\n                increment = count;\n            }\n            else {\n                newSwipeState = SwipeState.NONE;\n                newSwipeAnimationDuration = swipeDuration;\n            }\n        }\n        newSwipeAnimationDuration = Math.round(newSwipeAnimationDuration);\n        cleanupSwipeOffset(() => {\n            setSwipeOffset(0);\n            setSwipeState(SwipeState.NONE);\n        }, newSwipeAnimationDuration);\n        if (carouselRef.current) {\n            prepareAnimation({\n                rect: carouselRef.current.getBoundingClientRect(),\n                index: state.globalIndex,\n            });\n        }\n        setSwipeState(newSwipeState);\n        publish(ACTION_SWIPE, {\n            type: \"swipe\",\n            increment,\n            duration: newSwipeAnimationDuration,\n            easing: swipeEasing,\n        });\n    });\n    React.useEffect(() => {\n        var _a, _b;\n        if (((_a = state.animation) === null || _a === void 0 ? void 0 : _a.increment) && ((_b = state.animation) === null || _b === void 0 ? void 0 : _b.duration)) {\n            cleanupAnimationIncrement(() => dispatch({ type: \"swipe\", increment: 0 }), state.animation.duration);\n        }\n    }, [state.animation, dispatch, cleanupAnimationIncrement]);\n    const swipeParams = [\n        subscribeSensors,\n        isSwipeValid,\n        (containerRect === null || containerRect === void 0 ? void 0 : containerRect.width) || 0,\n        animation.swipe,\n        () => setSwipeState(SwipeState.SWIPE),\n        (offset) => setSwipeOffset(offset),\n        (offset, duration) => swipe({ offset, duration, count: 1 }),\n        (offset) => swipe({ offset, count: 0 }),\n    ];\n    const pullDownParams = [\n        () => {\n            if (pullDownEnabled) {\n                setSwipeState(SwipeState.PULL_DOWN);\n            }\n        },\n        (offset) => setPullDownOffset(offset),\n        (offset) => pullDown(offset),\n        (offset) => pullDown(offset, true),\n    ];\n    usePointerSwipe(...swipeParams, pullDownEnabled, ...pullDownParams);\n    useWheelSwipe(swipeState, ...swipeParams);\n    const focusOnMount = useEventCallback(() => {\n        var _a;\n        if (controller.focus) {\n            (_a = containerRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n        }\n    });\n    React.useEffect(focusOnMount, [focusOnMount]);\n    const onViewCallback = useEventCallback(() => {\n        var _a;\n        (_a = on.view) === null || _a === void 0 ? void 0 : _a.call(on, { index: state.currentIndex });\n    });\n    React.useEffect(onViewCallback, [state.globalIndex, onViewCallback]);\n    React.useEffect(() => cleanup(subscribe(ACTION_PREV, (action) => swipe({ direction: ACTION_PREV, ...action })), subscribe(ACTION_NEXT, (action) => swipe({ direction: ACTION_NEXT, ...action })), subscribe(ACTION_SWIPE, (action) => dispatch(action))), [subscribe, swipe, dispatch]);\n    React.useEffect(() => subscribeSensors(EVENT_ON_KEY_UP, (event) => {\n        if (event.code === VK_ESCAPE) {\n            close();\n        }\n    }), [subscribeSensors, close]);\n    const context = React.useMemo(() => ({\n        prev,\n        next,\n        close,\n        focus,\n        slideRect: containerRect ? computeSlideRect(containerRect, carousel.padding) : { width: 0, height: 0 },\n        containerRect: containerRect || { width: 0, height: 0 },\n        subscribeSensors,\n        containerRef,\n        setCarouselRef,\n        toolbarWidth,\n        setToolbarWidth,\n    }), [\n        prev,\n        next,\n        close,\n        focus,\n        subscribeSensors,\n        containerRect,\n        containerRef,\n        setCarouselRef,\n        toolbarWidth,\n        setToolbarWidth,\n        carousel.padding,\n    ]);\n    React.useImperativeHandle(controller.ref, () => ({\n        prev,\n        next,\n        close,\n        focus,\n        getLightboxProps,\n        getLightboxState,\n    }), [prev, next, close, focus, getLightboxProps, getLightboxState]);\n    return (React.createElement(\"div\", { ref: handleContainerRef, className: clsx(cssClass(cssContainerPrefix()), cssClass(CLASS_FLEX_CENTER)), style: {\n            ...(swipeState === SwipeState.SWIPE\n                ? { [cssVar(\"swipe_offset\")]: `${Math.round(swipeOffset.current)}px` }\n                : null),\n            ...(swipeState === SwipeState.PULL_DOWN\n                ? {\n                    [cssVar(\"pull_down_offset\")]: `${Math.round(pullDownOffset.current)}px`,\n                    [cssVar(\"pull_down_opacity\")]: `${pullDownOpacity.current}`,\n                }\n                : null),\n            ...(controller.touchAction !== \"none\"\n                ? { [cssVar(\"controller_touch_action\")]: controller.touchAction }\n                : null),\n            ...styles.container,\n        }, ...(controller.aria ? { role: \"presentation\", \"aria-live\": \"polite\" } : null), tabIndex: -1, ...registerSensors }, containerRect && (React.createElement(ControllerContext.Provider, { value: context },\n        children, (_a = render.controls) === null || _a === void 0 ? void 0 :\n        _a.call(render)))));\n}\nconst ControllerModule = createModule(MODULE_CONTROLLER, Controller);\n\nfunction cssPrefix$2(value) {\n    return composePrefix(MODULE_CAROUSEL, value);\n}\nfunction cssSlidePrefix(value) {\n    return composePrefix(\"slide\", value);\n}\nfunction CarouselSlide({ slide, offset }) {\n    const containerRef = React.useRef(null);\n    const { currentIndex } = useLightboxState();\n    const { slideRect, close } = useController();\n    const { render, carousel: { imageFit }, on: { click: onClick }, controller: { closeOnBackdropClick }, } = useLightboxProps();\n    const renderSlide = () => {\n        var _a, _b, _c, _d;\n        let rendered = (_a = render.slide) === null || _a === void 0 ? void 0 : _a.call(render, { slide, offset, rect: slideRect });\n        if (!rendered && isImageSlide(slide)) {\n            rendered = (React.createElement(ImageSlide, { slide: slide, offset: offset, render: render, rect: slideRect, imageFit: imageFit, onClick: offset === 0 ? () => onClick === null || onClick === void 0 ? void 0 : onClick({ index: currentIndex }) : undefined }));\n        }\n        return rendered ? (React.createElement(React.Fragment, null, (_b = render.slideHeader) === null || _b === void 0 ? void 0 :\n            _b.call(render, { slide }),\n            ((_c = render.slideContainer) !== null && _c !== void 0 ? _c : (({ children }) => children))({ slide, children: rendered }), (_d = render.slideFooter) === null || _d === void 0 ? void 0 :\n            _d.call(render, { slide }))) : null;\n    };\n    const handleBackdropClick = (event) => {\n        const container = containerRef.current;\n        const target = event.target instanceof HTMLElement ? event.target : undefined;\n        if (closeOnBackdropClick &&\n            target &&\n            container &&\n            (target === container ||\n                (Array.from(container.children).find((x) => x === target) &&\n                    target.classList.contains(cssClass(CLASS_FULLSIZE))))) {\n            close();\n        }\n    };\n    return (React.createElement(\"div\", { ref: containerRef, className: clsx(cssClass(cssSlidePrefix()), offset === 0 && cssClass(cssSlidePrefix(\"current\")), cssClass(CLASS_FLEX_CENTER)), onClick: handleBackdropClick }, renderSlide()));\n}\nfunction Placeholder() {\n    return React.createElement(\"div\", { className: cssClass(\"slide\") });\n}\nfunction Carousel({ carousel: { finite, preload, padding, spacing } }) {\n    const { slides, currentIndex, globalIndex } = useLightboxState();\n    const { setCarouselRef } = useController();\n    const spacingValue = parseLengthPercentage(spacing);\n    const paddingValue = parseLengthPercentage(padding);\n    const items = [];\n    if ((slides === null || slides === void 0 ? void 0 : slides.length) > 0) {\n        for (let i = currentIndex - preload; i < currentIndex; i += 1) {\n            const key = globalIndex + i - currentIndex;\n            items.push(!finite || i >= 0 ? (React.createElement(CarouselSlide, { key: key, slide: slides[(i + preload * slides.length) % slides.length], offset: i - currentIndex })) : (React.createElement(Placeholder, { key: key })));\n        }\n        items.push(React.createElement(CarouselSlide, { key: globalIndex, slide: slides[currentIndex], offset: 0 }));\n        for (let i = currentIndex + 1; i <= currentIndex + preload; i += 1) {\n            const key = globalIndex + i - currentIndex;\n            items.push(!finite || i <= slides.length - 1 ? (React.createElement(CarouselSlide, { key: key, slide: slides[i % slides.length], offset: i - currentIndex })) : (React.createElement(Placeholder, { key: key })));\n        }\n    }\n    return (React.createElement(\"div\", { ref: setCarouselRef, className: clsx(cssClass(cssPrefix$2()), items.length > 0 && cssClass(cssPrefix$2(\"with_slides\"))), style: {\n            [`${cssVar(cssPrefix$2(\"slides_count\"))}`]: items.length,\n            [`${cssVar(cssPrefix$2(\"spacing_px\"))}`]: spacingValue.pixel || 0,\n            [`${cssVar(cssPrefix$2(\"spacing_percent\"))}`]: spacingValue.percent || 0,\n            [`${cssVar(cssPrefix$2(\"padding_px\"))}`]: paddingValue.pixel || 0,\n            [`${cssVar(cssPrefix$2(\"padding_percent\"))}`]: paddingValue.percent || 0,\n        } }, items));\n}\nconst CarouselModule = createModule(MODULE_CAROUSEL, Carousel);\n\nfunction NavigationButton({ label, icon, renderIcon, action, onClick, disabled }) {\n    return (React.createElement(IconButton, { label: label, icon: icon, renderIcon: renderIcon, className: cssClass(`navigation_${action}`), disabled: disabled, onClick: onClick, ...useLoseFocus(useController().focus, disabled) }));\n}\nfunction Navigation({ carousel: { finite }, animation, render: { buttonPrev, buttonNext, iconPrev, iconNext }, }) {\n    var _a;\n    const { slides, currentIndex } = useLightboxState();\n    const { prev, next, subscribeSensors } = useController();\n    const isRTL = useRTL();\n    const prevDisabled = slides.length === 0 || (finite && currentIndex === 0);\n    const nextDisabled = slides.length === 0 || (finite && currentIndex === slides.length - 1);\n    const throttle = ((_a = animation.navigation) !== null && _a !== void 0 ? _a : animation.swipe) / 2;\n    const prevThrottled = useThrottle(prev, throttle);\n    const nextThrottled = useThrottle(next, throttle);\n    const handleKeyDown = useEventCallback((event) => {\n        if (event.key === VK_ARROW_LEFT && !(isRTL ? nextDisabled : prevDisabled)) {\n            (isRTL ? nextThrottled : prevThrottled)();\n        }\n        if (event.key === VK_ARROW_RIGHT && !(isRTL ? prevDisabled : nextDisabled)) {\n            (isRTL ? prevThrottled : nextThrottled)();\n        }\n    });\n    React.useEffect(() => subscribeSensors(EVENT_ON_KEY_DOWN, handleKeyDown), [subscribeSensors, handleKeyDown]);\n    return (React.createElement(React.Fragment, null,\n        buttonPrev ? (buttonPrev()) : (React.createElement(NavigationButton, { label: \"Previous\", action: ACTION_PREV, icon: PreviousIcon, renderIcon: iconPrev, disabled: prevDisabled, onClick: prev })),\n        buttonNext ? (buttonNext()) : (React.createElement(NavigationButton, { label: \"Next\", action: ACTION_NEXT, icon: NextIcon, renderIcon: iconNext, disabled: nextDisabled, onClick: next }))));\n}\nconst NavigationModule = createModule(MODULE_NAVIGATION, Navigation);\n\nconst noScroll = cssClass(CLASS_NO_SCROLL);\nconst noScrollPadding = cssClass(CLASS_NO_SCROLL_PADDING);\nfunction isHTMLElement(element) {\n    return \"style\" in element;\n}\nfunction padScrollbar(element, padding, rtl) {\n    const styles = window.getComputedStyle(element);\n    const property = rtl ? \"padding-left\" : \"padding-right\";\n    const computedValue = rtl ? styles.paddingLeft : styles.paddingRight;\n    const originalValue = element.style.getPropertyValue(property);\n    element.style.setProperty(property, `${(parseInt(computedValue, 10) || 0) + padding}px`);\n    return () => {\n        if (originalValue) {\n            element.style.setProperty(property, originalValue);\n        }\n        else {\n            element.style.removeProperty(property);\n        }\n    };\n}\nfunction NoScroll({ children }) {\n    const rtl = useRTL();\n    useLayoutEffect(() => {\n        const cleanup = [];\n        const { body, documentElement } = document;\n        const scrollbar = Math.round(window.innerWidth - documentElement.clientWidth);\n        if (scrollbar > 0) {\n            cleanup.push(padScrollbar(body, scrollbar, rtl));\n            const elements = body.getElementsByTagName(\"*\");\n            for (let i = 0; i < elements.length; i += 1) {\n                const element = elements[i];\n                if (isHTMLElement(element) &&\n                    window.getComputedStyle(element).getPropertyValue(\"position\") === \"fixed\" &&\n                    !element.classList.contains(noScrollPadding)) {\n                    cleanup.push(padScrollbar(element, scrollbar, rtl));\n                }\n            }\n        }\n        body.classList.add(noScroll);\n        return () => {\n            body.classList.remove(noScroll);\n            cleanup.forEach((clean) => clean());\n        };\n    }, [rtl]);\n    return React.createElement(React.Fragment, null, children);\n}\nconst NoScrollModule = createModule(MODULE_NO_SCROLL, NoScroll);\n\nfunction cssPrefix$1(value) {\n    return composePrefix(MODULE_PORTAL, value);\n}\nfunction setAttribute(element, attribute, value) {\n    const previousValue = element.getAttribute(attribute);\n    element.setAttribute(attribute, value);\n    return () => {\n        if (previousValue) {\n            element.setAttribute(attribute, previousValue);\n        }\n        else {\n            element.removeAttribute(attribute);\n        }\n    };\n}\nfunction Portal({ children, animation, styles, className, on, portal, close }) {\n    const [mounted, setMounted] = React.useState(false);\n    const [visible, setVisible] = React.useState(false);\n    const cleanup = React.useRef([]);\n    const { setTimeout } = useTimeouts();\n    const { subscribe } = useEvents();\n    const reduceMotion = useMotionPreference();\n    const animationDuration = !reduceMotion ? animation.fade : 0;\n    React.useEffect(() => {\n        setMounted(true);\n        return () => {\n            setMounted(false);\n            setVisible(false);\n        };\n    }, []);\n    const handleClose = useEventCallback(() => {\n        var _a;\n        setVisible(false);\n        (_a = on.exiting) === null || _a === void 0 ? void 0 : _a.call(on);\n        setTimeout(() => {\n            var _a;\n            (_a = on.exited) === null || _a === void 0 ? void 0 : _a.call(on);\n            close();\n        }, animationDuration);\n    });\n    React.useEffect(() => subscribe(ACTION_CLOSE, handleClose), [subscribe, handleClose]);\n    const handleEnter = useEventCallback((node) => {\n        var _a, _b, _c;\n        node.scrollTop;\n        setVisible(true);\n        (_a = on.entering) === null || _a === void 0 ? void 0 : _a.call(on);\n        const elements = (_c = (_b = node.parentNode) === null || _b === void 0 ? void 0 : _b.children) !== null && _c !== void 0 ? _c : [];\n        for (let i = 0; i < elements.length; i += 1) {\n            const element = elements[i];\n            if ([\"TEMPLATE\", \"SCRIPT\", \"STYLE\"].indexOf(element.tagName) === -1 && element !== node) {\n                cleanup.current.push(setAttribute(element, \"inert\", \"true\"));\n                cleanup.current.push(setAttribute(element, \"aria-hidden\", \"true\"));\n            }\n        }\n        setTimeout(() => {\n            var _a;\n            (_a = on.entered) === null || _a === void 0 ? void 0 : _a.call(on);\n        }, animationDuration);\n    });\n    const handleExit = useEventCallback(() => {\n        cleanup.current.forEach((clean) => clean());\n        cleanup.current = [];\n    });\n    const handleRef = React.useCallback((node) => {\n        if (node) {\n            handleEnter(node);\n        }\n        else {\n            handleExit();\n        }\n    }, [handleEnter, handleExit]);\n    return mounted\n        ? createPortal(React.createElement(\"div\", { ref: handleRef, className: clsx(className, cssClass(\"root\"), cssClass(cssPrefix$1()), cssClass(CLASS_NO_SCROLL_PADDING), visible && cssClass(cssPrefix$1(\"open\"))), role: \"presentation\", \"aria-live\": \"polite\", style: {\n                ...(animation.fade !== LightboxDefaultProps.animation.fade\n                    ? { [cssVar(\"fade_animation_duration\")]: `${animationDuration}ms` }\n                    : null),\n                ...(animation.easing.fade !== LightboxDefaultProps.animation.easing.fade\n                    ? { [cssVar(\"fade_animation_timing_function\")]: animation.easing.fade }\n                    : null),\n                ...styles.root,\n            } }, children), portal.root || document.body)\n        : null;\n}\nconst PortalModule = createModule(MODULE_PORTAL, Portal);\n\nfunction Root({ children }) {\n    return React.createElement(React.Fragment, null, children);\n}\nconst RootModule = createModule(MODULE_ROOT, Root);\n\nfunction cssPrefix(value) {\n    return composePrefix(MODULE_TOOLBAR, value);\n}\nfunction Toolbar({ toolbar: { buttons }, render: { buttonClose, iconClose } }) {\n    const { close, setToolbarWidth } = useController();\n    const { setContainerRef, containerRect } = useContainerRect();\n    useLayoutEffect(() => {\n        setToolbarWidth(containerRect === null || containerRect === void 0 ? void 0 : containerRect.width);\n    }, [setToolbarWidth, containerRect === null || containerRect === void 0 ? void 0 : containerRect.width]);\n    const renderCloseButton = () => {\n        if (buttonClose)\n            return buttonClose();\n        return React.createElement(IconButton, { key: ACTION_CLOSE, label: \"Close\", icon: CloseIcon, renderIcon: iconClose, onClick: close });\n    };\n    return (React.createElement(\"div\", { ref: setContainerRef, className: cssClass(cssPrefix()), ...stopNavigationEventsPropagation() }, buttons === null || buttons === void 0 ? void 0 : buttons.map((button) => (button === ACTION_CLOSE ? renderCloseButton() : button))));\n}\nconst ToolbarModule = createModule(MODULE_TOOLBAR, Toolbar);\n\nfunction renderNode(node, props) {\n    var _a;\n    return React.createElement(node.module.component, { key: node.module.name, ...props }, (_a = node.children) === null || _a === void 0 ? void 0 : _a.map((child) => renderNode(child, props)));\n}\nfunction mergeAnimation(defaultAnimation, animation = {}) {\n    const { easing: defaultAnimationEasing, ...restDefaultAnimation } = defaultAnimation;\n    const { easing, ...restAnimation } = animation;\n    return {\n        easing: { ...defaultAnimationEasing, ...easing },\n        ...restDefaultAnimation,\n        ...restAnimation,\n    };\n}\nfunction Lightbox({ carousel, animation, render, toolbar, controller, on, plugins, slides, index, ...restProps }) {\n    const { animation: defaultAnimation, carousel: defaultCarousel, render: defaultRender, toolbar: defaultToolbar, controller: defaultController, on: defaultOn, slides: defaultSlides, index: defaultIndex, plugins: defaultPlugins, ...restDefaultProps } = LightboxDefaultProps;\n    const { config, augmentation } = withPlugins([\n        createNode(PortalModule, [\n            createNode(NoScrollModule, [\n                createNode(ControllerModule, [\n                    createNode(CarouselModule),\n                    createNode(ToolbarModule),\n                    createNode(NavigationModule),\n                ]),\n            ]),\n        ]),\n    ], plugins || defaultPlugins);\n    const props = augmentation({\n        animation: mergeAnimation(defaultAnimation, animation),\n        carousel: { ...defaultCarousel, ...carousel },\n        render: { ...defaultRender, ...render },\n        toolbar: { ...defaultToolbar, ...toolbar },\n        controller: { ...defaultController, ...controller },\n        on: { ...defaultOn, ...on },\n        ...restDefaultProps,\n        ...restProps,\n    });\n    if (!props.open)\n        return null;\n    return (React.createElement(LightboxPropsProvider, { ...props },\n        React.createElement(LightboxStateProvider, { slides: slides || defaultSlides, index: index || defaultIndex },\n            React.createElement(TimeoutsProvider, null,\n                React.createElement(EventsProvider, null, renderNode(createNode(RootModule, config), props))))));\n}\n\nexport { ACTION_CLOSE, ACTION_NEXT, ACTION_PREV, ACTION_SWIPE, CLASS_FLEX_CENTER, CLASS_FULLSIZE, CLASS_NO_SCROLL, CLASS_NO_SCROLL_PADDING, Carousel, CarouselModule, CloseIcon, Controller, ControllerContext, ControllerModule, ELEMENT_BUTTON, ELEMENT_ICON, EVENT_ON_KEY_DOWN, EVENT_ON_KEY_UP, EVENT_ON_POINTER_CANCEL, EVENT_ON_POINTER_DOWN, EVENT_ON_POINTER_LEAVE, EVENT_ON_POINTER_MOVE, EVENT_ON_POINTER_UP, EVENT_ON_WHEEL, ErrorIcon, EventsContext, EventsProvider, IMAGE_FIT_CONTAIN, IMAGE_FIT_COVER, IconButton, ImageSlide, Lightbox, LightboxDefaultProps, LightboxDispatchContext, LightboxPropsContext, LightboxPropsProvider, LightboxStateContext, LightboxStateProvider, LoadingIcon, MODULE_CAROUSEL, MODULE_CONTROLLER, MODULE_NAVIGATION, MODULE_NO_SCROLL, MODULE_PORTAL, MODULE_ROOT, MODULE_TOOLBAR, Navigation, NavigationButton, NavigationModule, NextIcon, NoScroll, NoScrollModule, Portal, PortalModule, PreviousIcon, Root, RootModule, SLIDE_STATUS_COMPLETE, SLIDE_STATUS_ERROR, SLIDE_STATUS_LOADING, SLIDE_STATUS_PLACEHOLDER, SwipeState, TimeoutsContext, TimeoutsProvider, Toolbar, ToolbarModule, UNKNOWN_ACTION_TYPE, VK_ARROW_LEFT, VK_ARROW_RIGHT, VK_ESCAPE, activeSlideStatus, addToolbarButton, cleanup, clsx, composePrefix, computeSlideRect, createIcon, createIconDisabled, createModule, createNode, cssClass, cssVar, Lightbox as default, devicePixelRatio, getSlide, getSlideIfPresent, getSlideIndex, hasSlides, hasWindow, isImageFitCover, isImageSlide, label, makeComposePrefix, makeUseContext, parseLengthPercentage, round, setRef, stopNavigationEventsPropagation, useAnimation, useContainerRect, useController, useDelay, useEventCallback, useEvents, useForkRef, useLayoutEffect, useLightboxDispatch, useLightboxProps, useLightboxState, useLoseFocus, useMotionPreference, usePointerEvents, usePointerSwipe, usePreventSwipeNavigation, useRTL, useSensors, useThrottle, useTimeouts, useWheelSwipe, withPlugins };"],"mappings":"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"},"metadata":{},"sourceType":"module"}